(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[17],{b031:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{staticClass:"flex bg-white"},[a("div",{staticClass:"full-width"},[a("div",{staticClass:"q-pt-sm q-pl-sm q-pr-sm q-gutter-sm"},[a("q-bar",{staticClass:"bg-grey-4 text-grey-7 text-bold",staticStyle:{height:"47px"},attrs:{dense:""}},[a("q-icon",{staticClass:"q-pr-md",staticStyle:{"padding-left":"27px"},attrs:{size:"sm",name:"settings_input_component"}}),a("div",[e._v("Gestão de Máquinas")]),a("q-space"),a("q-icon",{attrs:{name:"near_me"}})],1),a("div",{},[1==e.loadx?a("div",{staticClass:"q-pa-md text-center"},[a("q-spinner-tail",{attrs:{size:"xl",color:"red-9"}})],1):e._e(),0==e.loadx?a("q-table",{staticClass:"no-border-radius",attrs:{title:"",data:e.data,columns:e.columns,"row-key":"designacao","selected-rows-label":e.getSelectedString,"rows-per-page-label":"Mostrar","no-results-label":"Nenhum dado encontrado!","no-data-label":"...",headerClasses:"text-red",filter:e.filter},scopedSlots:e._u([{key:"top-left",fn:function(){return[a("q-btn",{staticClass:"q-mr-xs",attrs:{size:"sm",color:"info",icon:"line_style"}}),a("q-btn",{attrs:{size:"sm",color:"green-8",icon:"format_clear"},on:{click:function(t){e.filter=""}}})]},proxy:!0},{key:"top-right",fn:function(){return[a("q-input",{staticClass:"q-pa-md",staticStyle:{width:"500px"},attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Pesquisar"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}}),a("q-btn",{attrs:{color:"green-8",icon:"label_off"},on:{click:function(t){e.filter=""}}}),a("q-btn",{attrs:{label:"Adicionar",color:"info",icon:"add_circle"},on:{click:function(t){return e.showMaquina()}}})]},proxy:!0}],null,!1,2911788145),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0},{key:"body",fn:function(t){return[a("q-tr",{attrs:{props:t}},[a("q-td",{staticClass:"text-bold text-grey-8 text-body2"},[a("q-btn-dropdown",{staticClass:"no-border-radius",attrs:{size:"xs",icon:"vertical_split",color:"info",label:""}},[a("div",{staticClass:"row no-wrap q-pa-md"},[a("div",{staticClass:"column"},[a("div",{staticClass:"text-subtitle1 text-bold text-grey-7 q-mb-md"},[e._v("\n                        Operações\n                      ")]),a("q-toggle",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:t.row.isActivo?"Desactivar":"Activar",color:"info"},on:{input:function(a){return e.activar(t.row)}},model:{value:t.row.isActivo,callback:function(a){e.$set(t.row,"isActivo",a)},expression:"props.row.isActivo"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-mb-xs",attrs:{icon:"edit",color:"blue-8",label:"Alterar",push:"",size:"sm"},on:{click:function(a){return e.showMaquinaEdit(t.row)}}})],1)])]),a("q-badge",{staticClass:"q-ml-md no-border-radius",attrs:{color:t.row.isActivo?"green-8":"red-8"}},[e._v(e._s(t.row.isActivo?"Activo":"Inativo"))])],1),e._l(t.cols,(function(i){return a("q-td",{key:i.name,staticClass:"text-bold",attrs:{props:t}},[e._v(e._s(i.value))])}))],2)]}}],null,!1,2403562037)}):e._e()],1),a("q-dialog",{attrs:{persistent:"","transition-show":"flip-down","transition-hide":"flip-up"},model:{value:e.btnAddMaquina,callback:function(t){e.btnAddMaquina=t},expression:"btnAddMaquina"}},[a("q-card",{staticClass:"bg-white text-grey-8 no-border-radius",staticStyle:{width:"700px","max-width":"80vw"}},[a("q-bar",{staticClass:"bg-info text-white"},[a("q-space"),a("q-btn",{attrs:{dense:"",flat:"",icon:"close"}},[a("q-tooltip",{attrs:{"content-class":"bg-white text-info"},on:{click:function(t){return e.showMaquina()}}},[e._v("Fechar")])],1)],1),a("q-card-section",[a("div",{staticClass:"text-h6"},[a("div",[a("q-icon",{attrs:{size:"xl",name:"add"}}),e._v("Adicionar Máquina")],1)])]),a("q-card-section",[a("q-form",{staticClass:"form-group",on:{submit:function(t){return e.addMaquina(e.maquina)}}},[a("div",{staticClass:"row q-pb-md"},[a("div",{staticClass:"col-md-12 q-pr-xs"},[a("q-input",{attrs:{autofocus:"",color:"blue-9",label:"Descrição",filled:"","lazy-rules":"",required:"",rules:[function(e){return e&&e.length>0||"Descrição Inválida"}]},model:{value:e.maquina.descricao,callback:function(t){e.$set(e.maquina,"descricao",t)},expression:"maquina.descricao"}})],1),a("div",{staticClass:"col-md-12 q-pr-xs"},[a("q-input",{attrs:{autofocus:"",color:"blue-9",label:"Referência",filled:""},model:{value:e.maquina.referencia,callback:function(t){e.$set(e.maquina,"referencia",t)},expression:"maquina.referencia"}})],1)]),a("div",{staticClass:"row"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-ml-md",attrs:{color:"red","icon-right":"cancel",label:"Cancelar"},on:{click:function(t){e.btnAddMaquina=!1}}}),e.maquina.descricao?a("q-btn",{staticClass:"q-ml-md",attrs:{color:"info",type:"submit","icon-right":"send",label:"Confirmar"}}):e._e()],1)])],1)],1)],1),a("q-dialog",{attrs:{persistent:"","transition-show":"flip-down","transition-hide":"flip-up"},model:{value:e.btnEditMaquina,callback:function(t){e.btnEditMaquina=t},expression:"btnEditMaquina"}},[a("q-card",{staticClass:"bg-white text-grey-8 no-border-radius",staticStyle:{width:"700px","max-width":"80vw"}},[a("q-bar",{staticClass:"bg-info text-white"},[a("q-space"),a("q-btn",{attrs:{dense:"",flat:"",icon:"close"}},[a("q-tooltip",{attrs:{"content-class":"bg-white text-info"},on:{click:function(t){return e.showMaquina()}}},[e._v("Fechar")])],1)],1),a("q-card-section",[a("div",{staticClass:"text-h6"},[a("div",[a("q-icon",{attrs:{size:"xl",name:"edit"}}),e._v("Alterar Máquina")],1)])]),a("q-card-section",[a("q-form",{staticClass:"form-group",on:{submit:function(t){return e.addMaquina(e.maquina)}}},[a("div",{staticClass:"row q-pb-md"},[a("div",{staticClass:"col-md-12 q-pr-xs"},[a("q-input",{attrs:{autofocus:"",color:"blue-9",label:"Descrição",filled:"","lazy-rules":"",required:"",rules:[function(e){return e&&e.length>0||"Descrição Inválida"}]},model:{value:e.maquina.descricao,callback:function(t){e.$set(e.maquina,"descricao",t)},expression:"maquina.descricao"}})],1),a("div",{staticClass:"col-md-12 q-pr-xs"},[a("q-input",{attrs:{autofocus:"",color:"blue-9",label:"Referência",filled:""},model:{value:e.maquina.referencia,callback:function(t){e.$set(e.maquina,"referencia",t)},expression:"maquina.referencia"}})],1)]),a("div",{staticClass:"row"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-ml-md",attrs:{color:"red","icon-right":"cancel",label:"Cancelar"},on:{click:function(t){e.btnEditMaquina=!1}}}),e.maquina.descricao?a("q-btn",{staticClass:"q-ml-md",attrs:{color:"light-blue",type:"submit","icon-right":"send",label:"Confirmar"}}):e._e()],1)])],1)],1)],1)],1)])])},n=[],s=a("c47a"),r=a.n(s),o=a("967e"),c=a.n(o),l=(a("96cf"),a("fa84")),d=a.n(l),u=(a("6b54"),a("06db"),a("b383"),a("cf57")),p=a("981c"),m=(a("e669"),a("6bed")),f={data:function(){return{userLogado:JSON.parse(localStorage.getItem("userlogado")),maquina:{idDestinoTickets:null,descricao:"",referencia:null,isActivo:!0},btnAddMaquina:!1,btnEditMaquina:!1,filter:"",loadx:!1,spinner2:"undefined"!==typeof m["a"]?m["a"]:Quasar.components.QSpinnerComment,columns:[{align:"left",label:"Operações",sortable:!0},{name:"descricao",required:!0,label:"Máquina (Designação)",align:"left",field:function(e){return e.descricao?e.descricao:"----------"},format:function(e){return"".concat(e)},sortable:!0},{name:"referencia",label:"Referência",align:"left",field:function(e){return e.referencia?e.referencia:"----------"},format:function(e){return"".concat(e)},sortable:!0}],data:[]}},created:function(){},mounted:function(){this.booting()},methods:r()({booting:function(){this.getAcessoMENU("admin")||this.getAcessoMENU("gestores")||this.getAcessoMENU("comissão provincial")?this.listar():this.$router.push("/dashboard")},getAcessoMENU:function(e){if(this.userLogado)return!(!this.userLogado||!this.userLogado.roles.filter((function(t){return t.nome.toString().toLowerCase()===e})).length)},activar:function(){var e=d()(c.a.mark((function e(t){var a,i,n=this;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={},a.idDestinoTickets=t.idDestinoTickets,a.descricao=t.descricao,a.isActivo=t.isActivo,a.referencia=t.referencia,a.IdUser=this.userLogado.idUtilizador,e.prev=6,e.next=9,this.$store.dispatch("maquinas/up",a);case 9:i=e.sent,null!==i.data&&i.data.statusCode>-1?this.timer=setTimeout((function(){n.$q.loading.show({spinner:n.spinner2,spinnerColor:"green-4",message:"Operação realizada com sucesso!*"}),n.timer=setTimeout((function(){n.$q.loading.hide(),n.timer=void 0,n.loadx=!0,n.listar(),n.filter=a.descricao,n.btnAddMaquina=!1,n.btnEditMaquina=!1}),1e3)}),0):null!==i.data&&1===i.data.statusCode?this.lmsg("orange","Ups!! Erro ao realizar a operação!*","orange"):this.lmsgx("red-9",error,"red-9"),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](6),this.lmsgx("red-9",e.t0,"red-9");case 16:case"end":return e.stop()}}),e,this,[[6,13]])})));function t(t){return e.apply(this,arguments)}return t}(),addMaquina:function(){var e=d()(c.a.mark((function e(t){var a,i,n=this;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.IdUser=this.userLogado.idUtilizador,this.lprocessar(),1!=this.btnAddMaquina){e.next=15;break}return e.prev=3,e.next=6,this.$store.dispatch("maquinas/add",t);case 6:a=e.sent,null!==a.data&&a.data.statusCode>-1?this.timer=setTimeout((function(){n.$q.loading.show({spinner:n.spinner2,spinnerColor:"green-4",message:"Operação realizada com sucesso!*"}),n.timer=setTimeout((function(){n.$q.loading.hide(),n.timer=void 0,n.loadx=!0,n.listar(),n.filter=t.descricao,n.btnAddMaquina=!1,n.btnEditMaquina=!1}),1e3)}),0):null!==a.data&&1===a.data.statusCode?this.lmsg("orange","Ups!! Erro ao realizar a operação!*","orange"):this.lmsgx("red-9",error,"red-9"),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](3),this.lmsgx("red-9",e.t0,"red-9");case 13:e.next=27;break;case 15:if(1!=this.btnEditMaquina){e.next=27;break}return e.prev=16,this.maquina.idDestinoTickets=t.idDestinoTickets,e.next=20,this.$store.dispatch("maquinas/up",t);case 20:i=e.sent,null!==i.data&&i.data.statusCode>-1?this.timer=setTimeout((function(){n.$q.loading.show({spinner:n.spinner2,spinnerColor:"green-4",message:"Operação realizada com sucesso!*"}),n.timer=setTimeout((function(){n.$q.loading.hide(),n.timer=void 0,n.loadx=!0,n.listar(),n.filter=t.descricao,n.btnAddMaquina=!1,n.btnEditMaquina=!1}),1e3)}),0):null!==i.data&&1===i.data.statusCode?this.lmsg("orange","Ups!! Erro ao realizar a operação!*","orange"):this.lmsgx("red-9",error,"red-9"),e.next=27;break;case 24:e.prev=24,e.t1=e["catch"](16),this.lmsgx("red-9",e.t1,"red-9");case 27:case"end":return e.stop()}}),e,this,[[3,10],[16,24]])})));function t(t){return e.apply(this,arguments)}return t}(),showMaquina:function(){this.btnAddMaquina=!this.btnAddMaquina,this.maquina.descricao="",this.maquina.referencia="",this.btnEditMaquina=!1},showMaquinaEdit:function(e){this.btnEditMaquina=!this.btnAddMaquina,this.maquina.descricao="",this.maquina.referencia="",1==this.btnEditMaquina&&(this.maquina.idDestinoTickets=e.idDestinoTickets,this.maquina.descricao=e.descricao,this.maquina.isActivo=e.isActivo,this.maquina.referencia=e.referencia)},lmsg:function(e,t,a){var i=this,n=("undefined"!==typeof u["a"]?u["a"]:Quasar.components.QSpinnerGears,"undefined"!==typeof m["a"]?m["a"]:Quasar.components.QSpinnerComment);this.timer=setTimeout((function(){i.$q.loading.show({spinner:n,spinnerColor:a,messageColor:"white",backgroundColor:e,message:t}),i.timer=setTimeout((function(){i.$q.loading.hide(),i.timer=void 0}),1e3)}),100)},getSelectedString:function(){return 0===this.selected.length?"":"".concat(this.selected.length," linha").concat(this.selected.length>1?"s":""," selecionada").concat(this.selected.length>1?"s":""," de ").concat(this.data.length," Registro").concat(this.data.length>1?"s":"")},listar:function(){var e=d()(c.a.mark((function e(){var t,a=this;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.filter="","undefined"!==typeof m["a"]?m["a"]:Quasar.components.QSpinnerComment,e.prev=2,this.loadx=!0,e.next=6,this.$store.dispatch("maquinas/list");case 6:t=e.sent,null!=t.data?this.timer=setTimeout((function(){a.timer=setTimeout((function(){a.$q.loading.hide(),a.timer=void 0,a.data=t.data,a.lista=t.data,a.loadx=!1}),1e3)}),0):this.lmsg("red","ups! Ocorreu um erro internamente","red"),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2),this.lmsgx("red-9",e.t0,"red-9");case 13:case"end":return e.stop()}}),e,this,[[2,10]])})));function t(){return e.apply(this,arguments)}return t}(),lprocessar:function(){var e="undefined"!==typeof u["a"]?u["a"]:Quasar.components.QSpinnerGears;"undefined"!==typeof m["a"]?m["a"]:Quasar.components.QSpinnerComment;this.$q.loading.show({spinner:e,message:"Por favor, aguarde alguns segundos..."})},lmsgx:function(e,t,a){var i=this,n="",s=("undefined"!==typeof p["a"]?p["a"]:Quasar.components.QSpinnerGrid,"undefined"!==typeof m["a"]?m["a"]:Quasar.components.QSpinnerComment);t.response&&(n=401==t.response.status?"owh!! A sessão expirou, faça novamente o login.":"Ups! Ocorreu um erro, por favor tente novamente!"),this.timer=setTimeout((function(){i.$q.loading.show({spinner:s,spinnerColor:a,messageColor:"white",backgroundColor:e,message:n}),i.timer=setTimeout((function(){i.$q.loading.hide(),i.timer=void 0,t.response&&t.response.status&&401==t.response.status&&i.$router.push("/auth")}),3e3)}),0)}},"lmsg",(function(e,t,a){var i=this,n=("undefined"!==typeof p["a"]?p["a"]:Quasar.components.QSpinnerGrid,"undefined"!==typeof m["a"]?m["a"]:Quasar.components.QSpinnerComment);this.timer=setTimeout((function(){i.$q.loading.show({spinner:n,spinnerColor:a,messageColor:"white",backgroundColor:e,message:t}),i.timer=setTimeout((function(){i.$q.loading.hide(),i.timer=void 0,i.usr.UserName=""}),1e3)}),0)}))},h=f,q=a("2877"),b=a("eebe"),g=a.n(b),v=a("9989"),x=a("d847"),w=a("0016"),C=a("2c91"),k=a("007d"),M=a("eaac"),y=a("9c40"),Q=a("27f9"),A=a("bd08"),S=a("db86"),T=a("f20b"),_=a("9564"),$=a("58a8"),E=a("24e8"),z=a("f09f"),D=a("05c0"),U=a("a370"),N=a("0378"),O=a("7f67"),I=Object(q["a"])(h,i,n,!1,null,"2357b0b4",null);t["default"]=I.exports;g()(I,"components",{QPage:v["a"],QBar:x["a"],QIcon:w["a"],QSpace:C["a"],QSpinnerTail:k["a"],QTable:M["a"],QBtn:y["a"],QInput:Q["a"],QTr:A["a"],QTd:S["a"],QBtnDropdown:T["a"],QToggle:_["a"],QBadge:$["a"],QDialog:E["a"],QCard:z["a"],QTooltip:D["a"],QCardSection:U["a"],QForm:N["a"]}),g()(I,"directives",{ClosePopup:O["a"]})}}]);