(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{aeab:function(e,s,a){"use strict";a.r(s);var t=function(){var e=this,s=this,a=s.$createElement,t=s._self._c||a;return t("q-page",{staticClass:"docs-input row justify-center"},[t("div",{staticClass:"col-xl-4 col-lg-4 col-md-3 col-sm-6 col-xs-12 q-pa-md"},[t("div",{staticClass:"text-center q-pb-xs"},[t("div",{staticClass:"text-grey-7"},[t("q-toolbar"),t("q-toolbar",{attrs:{inset:""}},[t("q-breadcrumbs",{staticStyle:{"font-size":"25px"},attrs:{"active-color":"white"}})],1),t("q-toolbar",{attrs:{inset:""}},[t("q-breadcrumbs",{staticStyle:{"font-size":"25px"},attrs:{"active-color":"white"}})],1),t("p",[t("q-icon",{staticClass:"q-mr-xs q-mb-xs text-grey-6",attrs:{size:"xs",name:"vpn_lock"}}),t("span",{staticClass:"text-bold text-grey-6 text-subtitle1"},[s._v("Olá, Faça o Login por favor!")])],1)],1)]),t("q-form",{staticClass:"q-gutter-md",on:{submit:s.onSubmit}},[t("q-input",{attrs:{filled:"",color:"grey",label:"Ex: carlos43 *",hint:"Utilizador",error:s.isTest,required:"","lazy-rules":"",rules:[function(e){return e&&e.length>3||"Utilizador Inválido"}]},model:{value:s.user.userName,callback:function(e){s.$set(s.user,"userName",e)},expression:"user.userName"}}),t("q-input",{attrs:{color:"grey",filled:"",type:s.isPwd?"password":"text",label:"Ex: 142135 *",hint:"Palavra-passe","lazy-rules":"",rules:[function(e){return e&&e.length>3||"Palavra-Passe Inválida"}]},scopedSlots:s._u([{key:"append",fn:function(){return[t("q-icon",{staticClass:"cursor-pointer",attrs:{error:s.isTest,name:s.isPwd?"visibility_off":"visibility"},on:{click:function(e){s.isPwd=!s.isPwd}}})]},proxy:!0}]),model:{value:s.user.password,callback:function(e){s.$set(s.user,"password",e)},expression:"user.password"}}),t("div",{staticClass:"row"},[t("q-btn",{staticClass:"full-width no-border-radius",staticStyle:{height:"45px"},attrs:{padding:"",label:"Entrar",type:"submit",color:"info"}})],1)],1),t("q-dialog",{attrs:{persistent:"",position:"top"},model:{value:s.recover_password,callback:function(e){s.recover_password=e},expression:"recover_password"}},[t("q-card",{},[t("q-linear-progress",{attrs:{value:1,color:"primary"}}),t("q-card-section",{staticClass:"row items-center no-wrap q-gutter-md"},[t("q-form",{staticClass:"row q-gutter-md",on:{submit:function(e){return s.changePassword()}}},[t("div",{staticClass:"col-md-12"},[t("p",{staticClass:"text-subtitle1 text-bold text-grey-7"},[s._v('\n                  "Por Motivos de Segurança pedimos encarecidamente que\n                  '),t("b",{staticClass:"text-primary"},[s._v("altere a sua Palavra-Passe")]),s._v(', Por\n                  Favor!"\n                ')])]),t("div",{staticClass:"col-md-12"},[t("q-input",{attrs:{autofocus:"",label:"Nova Palavra-Passe",filled:"",type:s.isPwdx?"password":"text","lazy-rules":"",rules:[function(e){return e&&e.length>5&&"123456"!==e||"Não pode ter Menos de 6 caract. e Não pode ser 123456"}]},scopedSlots:s._u([{key:"append",fn:function(){return[t("q-icon",{staticClass:"cursor-pointer",attrs:{error:s.isTestx,name:s.isPwdx?"visibility_off":"visibility"},on:{click:function(e){s.isPwdx=!s.isPwdx}}})]},proxy:!0}]),model:{value:s.pass.NovaPassword,callback:function(e){s.$set(s.pass,"NovaPassword",e)},expression:"pass.NovaPassword"}})],1),t("div",{staticClass:"col-md-12"},[t("q-input",{attrs:{label:"Confirmar Palavra-Passe",filled:"",type:s.isPwdx?"password":"text","lazy-rules":"",rules:[function(s){return s&&s===e.pass.NovaPassword||"Confirmação diferente da Nova Palavra-Passe"}]},scopedSlots:s._u([{key:"append",fn:function(){return[t("q-icon",{staticClass:"cursor-pointer",attrs:{error:s.isTestx,name:s.isPwdx?"visibility_off":"visibility"},on:{click:function(e){s.isPwdx=!s.isPwdx}}})]},proxy:!0}]),model:{value:s.confPass,callback:function(e){s.confPass=e},expression:"confPass"}})],1),t("div",{staticClass:"col-md-12"},[t("q-btn",{staticClass:"q-ml-md",attrs:{color:"blue-7",type:"submit","icon-right":"send",label:"Actualizar"}})],1)]),t("q-space")],1)],1)],1)],1)])},r=[],o=a("967e"),i=a.n(o),n=(a("96cf"),a("fa84")),l=a.n(n),c=(a("bc3a"),a("b383")),u=a.n(c),d=a("cf57"),p=(a("e669"),a("6bed")),m={name:"PageIndex",data:function(){return{recover_password:!1,userLogado:JSON.parse(localStorage.getItem("userlogado")),isTestx:!1,isPwdx:!0,pass:{Username:null,PasswordAntiga:"123456",NovaPassword:null},confPass:null,user:{userName:null,password:null,grant_type:"password"},userLogged:{},isTest:!1,isPwd:!0,changeId:null}},methods:{lprocessar:function(){var e="undefined"!==typeof d["a"]?d["a"]:Quasar.components.QSpinnerGears;"undefined"!==typeof p["a"]?p["a"]:Quasar.components.QSpinnerComment;this.$q.loading.show({spinner:e,message:"Por favor, aguarde alguns segundos..."})},lmsg:function(e,s,a){var t=this,r=("undefined"!==typeof d["a"]?d["a"]:Quasar.components.QSpinnerGears,"undefined"!==typeof p["a"]?p["a"]:Quasar.components.QSpinnerComment);this.timer=setTimeout((function(){t.$q.loading.show({spinner:r,spinnerColor:a,messageColor:"white",backgroundColor:e,message:s}),t.timer=setTimeout((function(){t.$q.loading.hide(),t.timer=void 0}),3e3)}),0)},changePassword:function(){var e=l()(i.a.mark((function e(){var s,a,t=this;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s="undefined"!==typeof p["a"]?p["a"]:Quasar.components.QSpinnerComment,this.lprocessar(),e.prev=2,e.next=5,this.$store.dispatch("users/reiniciarPalavraPasse",{Id:this.changeId,NovaPassword:this.pass.NovaPassword});case 5:a=e.sent,0==a.data.statusCode?this.timer=setTimeout((function(){t.$q.loading.show({spinner:s,spinnerColor:"green-4",message:"Palavra-Passe Actualizada com sucesso*"}),t.timer=setTimeout((function(){t.$q.loading.hide(),t.timer=void 0,t.changeId=null,t.$router.push("/dashboard")}),1e3)}),0):this.lmsg("red","ups!Não foi possível alterar, verifique a palavra-passe antiga! *","red"),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),this.lmsg("red","ups!Não foi possível alterar, verifique a palavra-passe antiga! *","red");case 12:case"end":return e.stop()}}),e,this,[[2,9]])})));function s(){return e.apply(this,arguments)}return s}(),logout:function(){localStorage.removeItem("Authorization"),localStorage.removeItem("userId"),localStorage.removeItem("username"),localStorage.removeItem("email"),localStorage.removeItem("state"),localStorage.removeItem("personId"),localStorage.removeItem("fullName"),localStorage.removeItem("userlogado")},onSubmit:function(){var e=l()(i.a.mark((function e(){var s,a,t,r=this;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.changeId=null,s="undefined"!==typeof p["a"]?p["a"]:Quasar.components.QSpinnerComment,null!=this.user.userName&&null!=this.user.password&&""!=this.user.userName&&""!=this.user.password){e.next=5;break}e.next=28;break;case 5:return this.lprocessar(),e.prev=6,e.next=9,this.$store.dispatch("login/login",u.a.stringify(this.user));case 9:return a=e.sent,localStorage.setItem("Authorization",a.data.access_token),e.next=13,this.$store.dispatch("login/userLogged");case 13:t=e.sent,localStorage.setItem("userlogado",JSON.stringify(t.data)),localStorage.setItem("username",t.data.login),localStorage.setItem("userId",t.data.idUtilizador),localStorage.setItem("email",t.data.email),localStorage.setItem("state",t.data.isActivo),localStorage.setItem("fullName",t.data.nome),this.changeId=t.data.idUtilizador,null===t.data||"true"!=t.data.isActivo&&1!=t.data.isActivo?null===t.data||"false"!=t.data.isActivo&&0!=t.data.isActivo&&null!=t.data.isActivo||(this.lmsg("red","Este Utilizador Está Desativado! * ".concat(this.user.userName),"red"),this.logout()):this.timer=setTimeout((function(){r.$q.loading.show({spinner:s,spinnerColor:"green-4",message:"Acesso Permido, Bem-Vindo * ".concat(JSON.parse(localStorage.getItem("userlogado")).nome)}),r.timer=setTimeout((function(){r.$q.loading.hide(),r.timer=void 0,"123456"==r.user.password?r.recover_password=!0:r.$router.push("/dashboard")}),1e3)}),0),e.next=28;break;case 24:e.prev=24,e.t0=e["catch"](6),this.lmsg("red","Ups!... Utlizador Ou Palavra-Passe Incorrecta, por favor verifique!","red"),this.logout();case 28:case"end":return e.stop()}}),e,this,[[6,24]])})));function s(){return e.apply(this,arguments)}return s}(),beforeDestroy:function(){void 0!==this.timer&&(clearTimeout(this.timer),this.$q.loading.hide())}}},f=m,g=a("2877"),v=a("eebe"),h=a.n(v),w=a("9989"),b=a("65c6"),x=a("ead5"),P=a("0016"),y=a("0378"),q=a("27f9"),S=a("9c40"),C=a("24e8"),I=a("f09f"),N=a("6b1d"),Q=a("a370"),k=a("2c91"),_=Object(g["a"])(f,t,r,!1,null,null,null);s["default"]=_.exports;h()(_,"components",{QPage:w["a"],QToolbar:b["a"],QBreadcrumbs:x["a"],QIcon:P["a"],QForm:y["a"],QInput:q["a"],QBtn:S["a"],QDialog:C["a"],QCard:I["a"],QLinearProgress:N["a"],QCardSection:Q["a"],QSpace:k["a"]})}}]);