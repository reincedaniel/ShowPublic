(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[17],{d02c:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=this,a=t.$createElement,s=t._self._c||a;return s("q-page",{staticClass:"flex bg-white"},[s("div",{staticClass:"full-width"},[s("div",{staticClass:"q-pt-sm q-pl-sm q-pr-sm q-gutter-sm"},[s("q-bar",{staticClass:"bg-grey-4 text-grey-7 text-bold",staticStyle:{height:"47px"},attrs:{dense:""}},[s("q-icon",{staticClass:"q-pr-md",staticStyle:{"padding-left":"27px"},attrs:{size:"sm",name:"label"}}),s("div",[t._v("Contratos - Por Pagar")]),s("q-space"),s("q-btn",{staticClass:"q-mr-sm",attrs:{label:"Ir Para Contratos Pagos",color:"green-9",size:"sm",icon:"label_off"},on:{click:function(){e.$router.push("/pagos")}}})],1),s("div",{},[1==t.loadx?s("div",{staticClass:"q-pa-md text-center"},[s("q-spinner-tail",{attrs:{size:"xl",color:"info"}})],1):s("q-table",{staticClass:"no-border-radius",attrs:{color:"primary","card-class":"bg-amber-2 text-primary","table-class":"text-primary-8","table-header-class":"text-primary",title:"",data:t.data,columns:t.columns,"row-key":"designacao","selected-rows-label":t.getSelectedString,"rows-per-page-label":"Mostrar","no-results-label":"Nenhum dado encontrado!","no-data-label":"...",headerClasses:"text-red",filter:t.filter,selection:"multiple",selected:t.selected},on:{"update:selected":function(e){t.selected=e}},scopedSlots:t._u([{key:"top-left",fn:function(){return[s("q-btn",{staticClass:"q-mt-sm q-mb-sm no-border-radius q-mr-xs",attrs:{color:"blue-9","icon-right":"archive",label:"Exportar Para Excel","no-caps":"",size:"sm"}}),s("q-btn",{staticClass:"q-mr-xs",attrs:{size:"sm",color:"info",icon:"line_style"}}),s("q-btn",{attrs:{size:"sm",color:"green-8",icon:"format_clear"},on:{click:function(e){t.filter=""}}})]},proxy:!0},{key:"top-right",fn:function(){return[s("q-input",{staticClass:"q-pa-md",staticStyle:{width:"500px"},attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Pesquisar"},scopedSlots:t._u([{key:"append",fn:function(){return[s("q-icon",{attrs:{name:"search"}}),s("q-btn",{attrs:{color:"green-8",icon:"label_off"},on:{click:function(e){t.filter=""}}})]},proxy:!0}]),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})]},proxy:!0},{key:"body",fn:function(e){return[s("q-tr",{attrs:{props:e}},[s("q-td",{staticClass:"text-bold text-body1"},[s("q-checkbox",{attrs:{size:"md",val:e.row},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1),s("q-td",{staticClass:"text-bold text-grey-8 text-body2"},[s("q-btn-dropdown",{staticClass:"no-border-radius",attrs:{size:"xs",icon:"vertical_split",color:"info",label:""}},[s("div",{staticClass:"row no-wrap q-pa-md"},[s("div",{staticClass:"column"},[s("div",{staticClass:"text-subtitle1 text-bold text-grey-7 q-mb-md"},[t._v("\n                        Operações\n                      ")]),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-mb-xs",attrs:{icon:"history",color:"green-8",label:"Detalhes",push:"",size:"sm"},on:{click:function(a){return t.getEmpresa(e.row.empresa.id)}}})],1)])])],1),s("q-td",{key:"dividaPaga",staticClass:"text-bold text-body1"},[s("q-badge",{staticClass:"q-mr-md",attrs:{color:e.row.dividaPaga?"green-9":"red-9"}},[t._v("\n                  "+t._s(e.row.dividaPaga?"Paga":"Não Paga")+"\n                ")])],1),s("q-td",{key:"estado",staticClass:"text-bold text-body1"},[s("q-badge",{staticClass:"q-mr-md",attrs:{color:"grey-9"}},[t._v("\n                  "+t._s(t.getNull(e.row.estado))+"\n                ")])],1),t._l(e.cols,(function(a){return s("q-td",{key:a.name,staticClass:"text-bold",attrs:{props:e}},[t._v(t._s(a.value))])}))],2)]}}])})],1),s("q-dialog",{attrs:{persistent:"","transition-show":"flip-down","transition-hide":"flip-up"},model:{value:t.btnAddEmpresa,callback:function(e){t.btnAddEmpresa=e},expression:"btnAddEmpresa"}},[s("q-card",{staticClass:"bg-white text-grey-8 no-border-radius",staticStyle:{width:"700px","max-width":"80vw"}},[s("q-bar",{staticClass:"bg-info text-white"},[s("q-space"),s("q-btn",{attrs:{dense:"",flat:"",icon:"close"}},[s("q-tooltip",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{"content-class":"bg-white text-info"}},[t._v("Fechar")])],1)],1),s("q-card-section",[s("div",{staticClass:"text-h6"},[s("div",[s("q-icon",{attrs:{size:"xl",name:"add"}}),t._v("Adicionar Empresa")],1)])]),s("q-card-section",[s("q-form",{staticClass:"form-group",on:{submit:function(e){return t.addEmpresa(t.empresa)}}},[s("div",{staticClass:"row q-pb-md"},[s("div",{staticClass:"row col-md-12"},[s("div",{staticClass:"col-md-6 q-pr-xs"},[s("q-input",{attrs:{color:"blue-9",autofocus:"",label:"Nome da Empresa",filled:"","lazy-rules":"",required:"",rules:[function(e){return e&&e.length>0||"Empresa Inválida"}]},model:{value:t.empresa.nome,callback:function(e){t.$set(t.empresa,"nome",e)},expression:"empresa.nome"}})],1),s("div",{staticClass:"col-md-6 q-pr-xs"},[s("q-input",{attrs:{color:"blue-9",label:"NIF.",filled:"","lazy-rules":"",required:"",rules:[function(e){return e&&e.length>0||"NIF: Inválido"}]},model:{value:t.empresa.nif,callback:function(e){t.$set(t.empresa,"nif",e)},expression:"empresa.nif"}})],1)]),s("div",{staticClass:"row col-md-12"},[s("div",{staticClass:"col-md-6 q-pr-xs"},[s("q-input",{attrs:{color:"blue-9",label:"Província",filled:"","lazy-rules":"",required:"",rules:[function(e){return e&&e.length>0||"Província Inválida"}]},model:{value:t.empresa.provincia,callback:function(e){t.$set(t.empresa,"provincia",e)},expression:"empresa.provincia"}})],1),s("div",{staticClass:"col-md-6 q-pr-xs"},[s("q-input",{attrs:{color:"blue-9",label:"Município",filled:"","lazy-rules":"",required:"",rules:[function(e){return e&&e.length>0||"Município Inválido"}]},model:{value:t.empresa.municipio,callback:function(e){t.$set(t.empresa,"municipio",e)},expression:"empresa.municipio"}})],1)]),s("div",{staticClass:"row col-md-12"},[s("div",{staticClass:"col-md-6 q-pr-xs"},[s("q-input",{attrs:{color:"blue-9",label:"Sócio",filled:"","lazy-rules":"",required:"",rules:[function(e){return e&&e.length>0||"Sócio Inválido"}]},model:{value:t.empresa.socio,callback:function(e){t.$set(t.empresa,"socio",e)},expression:"empresa.socio"}})],1),s("div",{staticClass:"col-md-6 q-pr-xs"},[s("q-input",{attrs:{color:"blue-9",label:"Gerente",filled:"","lazy-rules":"",required:"",rules:[function(e){return e&&e.length>0||"Gerente Inválido"}]},model:{value:t.empresa.gerente,callback:function(e){t.$set(t.empresa,"gerente",e)},expression:"empresa.gerente"}})],1)]),s("div",{staticClass:"row col-md-12"},[s("div",{staticClass:"col-md-6 q-pr-xs"},[s("q-input",{attrs:{color:"blue-9",label:"Gerente(Tel.1)",filled:"","lazy-rules":"",required:"",rules:[function(e){return e&&e.length>0||"Gerente(Tel.1) Inválido"}]},model:{value:t.empresa.gerenteTel1,callback:function(e){t.$set(t.empresa,"gerenteTel1",e)},expression:"empresa.gerenteTel1"}})],1),s("div",{staticClass:"col-md-6 q-pr-xs"},[s("q-input",{attrs:{color:"blue-9",label:"Gerente(Tel.2)",filled:"","lazy-rules":"",required:"",rules:[function(e){return e&&e.length>0||"Gerente(Tel.2) Inválido"}]},model:{value:t.empresa.gerenteTel2,callback:function(e){t.$set(t.empresa,"gerenteTel2",e)},expression:"empresa.gerenteTel2"}})],1)])]),s("div",{staticClass:"row"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-ml-md",attrs:{color:"red","icon-right":"cancel",label:"Cancelar"},on:{click:function(e){t.btnAddEmpresa=!1}}}),null!=t.empresa.gerenteTel1?s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-ml-md",attrs:{color:"info",type:"submit","icon-right":"send",label:"Confirmar"}}):t._e()],1)])],1)],1)],1),s("q-dialog",{attrs:{persistent:"","transition-show":"flip-down","transition-hide":"flip-up"},model:{value:t.btnEditEmpresa,callback:function(e){t.btnEditEmpresa=e},expression:"btnEditEmpresa"}},[s("q-card",{staticClass:"bg-white text-grey-8 no-border-radius",staticStyle:{width:"700px","max-width":"80vw"}},[s("q-bar",{staticClass:"bg-info text-white"},[s("q-space"),s("q-btn",{attrs:{dense:"",flat:"",icon:"close"}},[s("q-tooltip",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{"content-class":"bg-white text-info"},on:{click:function(e){return t.showEmpresa()}}},[t._v("Fechar")])],1)],1),s("q-card-section",[s("div",{staticClass:"text-h6"},[s("div",[s("q-icon",{attrs:{size:"xl",name:"edit"}}),t._v("Alterar Empresa")],1)])]),s("q-card-section",[s("q-form",{staticClass:"form-group",on:{submit:function(e){return t.addEmpresa(t.empresa)}}},[s("div",{staticClass:"row q-pb-md"},[s("div",{staticClass:"row col-md-12"},[s("div",{staticClass:"col-md-6 q-pr-xs"},[s("q-input",{attrs:{color:"blue-9",autofocus:"",label:"Nome da Empresa",filled:"","lazy-rules":"",required:"",rules:[function(e){return e&&e.length>0||"Empresa Inválida"}]},model:{value:t.empresa.nome,callback:function(e){t.$set(t.empresa,"nome",e)},expression:"empresa.nome"}})],1),s("div",{staticClass:"col-md-6 q-pr-xs"},[s("q-input",{attrs:{color:"blue-9",label:"NIF.",filled:"","lazy-rules":"",required:"",rules:[function(e){return e&&e.length>0||"NIF: Inválido"}]},model:{value:t.empresa.nif,callback:function(e){t.$set(t.empresa,"nif",e)},expression:"empresa.nif"}})],1)]),s("div",{staticClass:"row col-md-12"},[s("div",{staticClass:"col-md-6 q-pr-xs"},[s("q-input",{attrs:{color:"blue-9",label:"Província",filled:"","lazy-rules":"",required:"",rules:[function(e){return e&&e.length>0||"Província Inválida"}]},model:{value:t.empresa.provincia,callback:function(e){t.$set(t.empresa,"provincia",e)},expression:"empresa.provincia"}})],1),s("div",{staticClass:"col-md-6 q-pr-xs"},[s("q-input",{attrs:{color:"blue-9",label:"Município",filled:"","lazy-rules":"",required:"",rules:[function(e){return e&&e.length>0||"Município Inválido"}]},model:{value:t.empresa.municipio,callback:function(e){t.$set(t.empresa,"municipio",e)},expression:"empresa.municipio"}})],1)]),s("div",{staticClass:"row col-md-12"},[s("div",{staticClass:"col-md-6 q-pr-xs"},[s("q-input",{attrs:{color:"blue-9",label:"Sócio",filled:"","lazy-rules":"",required:"",rules:[function(e){return e&&e.length>0||"Sócio Inválido"}]},model:{value:t.empresa.socio,callback:function(e){t.$set(t.empresa,"socio",e)},expression:"empresa.socio"}})],1),s("div",{staticClass:"col-md-6 q-pr-xs"},[s("q-input",{attrs:{color:"blue-9",label:"Gerente",filled:"","lazy-rules":"",required:"",rules:[function(e){return e&&e.length>0||"Gerente Inválido"}]},model:{value:t.empresa.gerente,callback:function(e){t.$set(t.empresa,"gerente",e)},expression:"empresa.gerente"}})],1)]),s("div",{staticClass:"row col-md-12"},[s("div",{staticClass:"col-md-6 q-pr-xs"},[s("q-input",{attrs:{color:"blue-9",label:"Gerente(Tel.1)",filled:"","lazy-rules":"",required:"",rules:[function(e){return e&&e.length>0||"Gerente(Tel.1) Inválido"}]},model:{value:t.empresa.gerenteTel1,callback:function(e){t.$set(t.empresa,"gerenteTel1",e)},expression:"empresa.gerenteTel1"}})],1),s("div",{staticClass:"col-md-6 q-pr-xs"},[s("q-input",{attrs:{color:"blue-9",label:"Gerente(Tel.2)",filled:"","lazy-rules":"",required:"",rules:[function(e){return e&&e.length>0||"Gerente(Tel.2) Inválido"}]},model:{value:t.empresa.gerenteTel2,callback:function(e){t.$set(t.empresa,"gerenteTel2",e)},expression:"empresa.gerenteTel2"}})],1)])]),s("div",{staticClass:"row"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-ml-md",attrs:{color:"red","icon-right":"cancel",label:"Cancelar"},on:{click:function(e){t.btnEditEmpresa=!1}}}),null!=t.empresa.gerenteTel1?s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-ml-md",attrs:{color:"light-blue",type:"submit","icon-right":"send",label:"Confirmar"}}):t._e()],1)])],1)],1)],1)],1)])])},r=[],i=a("967e"),l=a.n(i),n=(a("96cf"),a("fa84")),o=a.n(n),c=(a("28a5"),a("6b54"),a("06db"),a("b383"),a("cf57")),d=(a("e669"),a("6bed")),u=a("d272"),p={data:function(){var e=this;return{userLogado:JSON.parse(localStorage.getItem("userlogado")),loadx:!1,empresa:{id:null,isActivo:!0},btnAddEmpresa:!1,btnEditEmpresa:!1,selected:[],filter:"",columns:[{align:"left",label:"Operações",sortable:!0},{align:"left",label:"Divida",sortable:!0},{align:"left",label:"Estado",sortable:!0},{name:"descricao",required:!0,label:"Empresa",align:"left",field:function(t){return e.getNull(t.empresa?t.empresa.nome:"")},format:function(e){return"".concat(e)},sortable:!0},{name:"nif",required:!0,label:"NIF.",align:"left",field:function(t){return e.getNull(t.empresa?t.empresa.nif:"")},format:function(e){return"".concat(e)},sortable:!0},{name:"municipio",required:!0,label:"Província/Município",align:"left",field:function(t){return e.getNull(t.empresa?t.empresa.municipio.provincia.descricao:"")+" / "+e.getNull(t.empresa?t.empresa.municipio.descricao:"")},format:function(e){return"".concat(e)},sortable:!0},{name:"gerente",required:!0,label:"Gerente",align:"left",field:function(t){return e.getNull(t.empresa?t.empresa.gerente.nomeCompleto:"")},format:function(e){return"".concat(e)},sortable:!0},{name:"gerenteemail",required:!0,label:"E-mail *Gerente",align:"left",field:function(t){return e.getNull(t.empresa?t.empresa.gerente.email:"")},format:function(e){return"".concat(e)},sortable:!0},{name:"gerenteTel1",required:!0,label:"Contactos *Gerente",align:"left",field:function(t){return e.getNull(t.empresa?t.empresa.gerente.contacto1+" | "+t.empresa.gerente.contacto2+" | "+t.empresa.gerente.contacto3:"")},format:function(e){return"".concat(e)},sortable:!0},{name:"dataConclusaoDivida",required:!0,label:"Data Conclusão/Divida",align:"left",field:function(t){return e.getNullDate(t.dataConclusaoDivida)},format:function(e){return"".concat(e)},sortable:!0},{name:"motivoNaoPagamento",required:!0,label:"Motivo Ñ Pag.",align:"left",field:function(t){return e.getNull(t.motivoNaoPagamento?t.motivoNaoPagamento:"")},format:function(e){return"".concat(e)},sortable:!0}],data:[]}},created:function(){this.fasSignal=u["b"],this.fasWifi=u["c"],this.fasBatteryFull=u["a"]},mounted:function(){this.booting()},methods:{getEmpresa:function(e){this.$router.push({path:"/gerir_empresas",query:{data:{id:e}}})},booting:function(){this.getAcessoMENU("admin")||this.getAcessoMENU("gestor")?this.listar():this.$router.push("/dashboard")},getAcessoMENU:function(e){if(this.userLogado)return!(!this.userLogado||!this.userLogado.roles.filter((function(t){return t.nome.toString().toLowerCase()===e})).length)},getNullDate:function(e){return null==e||""==e?"------":e.toString().split("T")[0]},getNull:function(e){return null==e||""==e?"------":e},addEmpresa:function(e){if(""!=e.descricao&&""!=e.codigo){e.id=this.data.length+1,this.lmsg("info","Operação realizada com sucesso!","info");var t={id:e.id+1,nome:e.nome,nif:e.nif,provincia:e.provincia,municipio:e.municipio,socio:e.socio,gerente:e.gerente,gerenteTel1:e.gerenteTel1,gerenteTel2:e.gerenteTel2,isActivo:!0};this.data.push(t),this.btnAddEmpresa=!1,this.btnEditEmpresa=!1}else this.lmsg("orange","Preencha todos os campos","orange")},showEmpresa:function(){this.btnAddEmpresa=!this.btnAddEmpresa,this.empresa={},this.btnEditEmpresa=!1},showEmpresaEdit:function(e){this.btnEditEmpresa=!this.btnAddEmpresa,this.empresa.descricao="",this.empresa.codigo="",1==this.btnEditEmpresa&&(this.empresa={id:e.id,nome:e.nome,nif:e.nif,provincia:e.provincia,municipio:e.municipio,socio:e.socio,gerente:e.gerente,gerenteTel1:e.gerenteTel1,gerenteTel2:e.gerenteTel2,isActivo:e.isActivo})},lmsg:function(e,t,a){var s=this,r=("undefined"!==typeof c["a"]?c["a"]:Quasar.components.QSpinnerGears,"undefined"!==typeof d["a"]?d["a"]:Quasar.components.QSpinnerComment);this.timer=setTimeout((function(){s.$q.loading.show({spinner:r,spinnerColor:a,messageColor:"white",backgroundColor:e,message:t}),s.timer=setTimeout((function(){s.$q.loading.hide(),s.timer=void 0}),1e3)}),100)},getSelectedString:function(){return 0===this.selected.length?"":"".concat(this.selected.length," linha").concat(this.selected.length>1?"s":""," selecionada").concat(this.selected.length>1?"s":""," de ").concat(this.data.length," Registro").concat(this.data.length>1?"s":"")},listar:function(){var e=o()(l.a.mark((function e(){var t,a=this;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.filter="","undefined"!==typeof d["a"]?d["a"]:Quasar.components.QSpinnerComment,e.prev=2,this.loadx=!0,e.next=6,this.$store.dispatch("maquinas/porPagar");case 6:t=e.sent,null!=t.data?this.timer=setTimeout((function(){a.timer=setTimeout((function(){a.$q.loading.hide(),a.timer=void 0,a.data=t.data,a.lista=t.data,a.loadx=!1}),1e3)}),0):this.lmsg("red","ups! Ocorreu um erro internamente","red"),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2),this.lmsgx("red-9",e.t0,"red-9");case 13:case"end":return e.stop()}}),e,this,[[2,10]])})));function t(){return e.apply(this,arguments)}return t}()}},m=p,f=a("2877"),b=a("eebe"),g=a.n(b),v=a("9989"),h=a("d847"),q=a("0016"),x=a("2c91"),C=a("9c40"),w=a("007d"),y=a("eaac"),E=a("27f9"),k=a("bd08"),T=a("db86"),N=a("8f8e"),z=a("f20b"),S=a("9564"),I=a("58a8"),Q=a("24e8"),_=a("f09f"),P=a("05c0"),$=a("a370"),A=a("0378"),G=a("7f67"),D=Object(f["a"])(m,s,r,!1,null,"f25852c6",null);t["default"]=D.exports;g()(D,"components",{QPage:v["a"],QBar:h["a"],QIcon:q["a"],QSpace:x["a"],QBtn:C["a"],QSpinnerTail:w["a"],QTable:y["a"],QInput:E["a"],QTr:k["a"],QTd:T["a"],QCheckbox:N["a"],QBtnDropdown:z["a"],QToggle:S["a"],QBadge:I["a"],QDialog:Q["a"],QCard:_["a"],QTooltip:P["a"],QCardSection:$["a"],QForm:A["a"]}),g()(D,"directives",{ClosePopup:G["a"]})}}]);