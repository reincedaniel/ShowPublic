(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{"988d":function(e,t,a){"use strict";a.r(t);var i,s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{staticClass:"flex bg-white"},[a("div",{staticClass:"full-width"},[a("div",{staticClass:"q-pt-sm q-pl-sm q-pr-sm q-gutter-sm"},[a("q-bar",{staticClass:"bg-grey-4 text-grey-7 text-bold",staticStyle:{height:"47px"},attrs:{dense:""}},[a("q-icon",{staticClass:"q-pr-md",staticStyle:{"padding-left":"27px"},attrs:{size:"sm",name:"gavel"}}),a("div",[e._v("Gestão de Contratos")]),a("q-space"),a("q-btn",{attrs:{label:"Adicionar Empresa/Contrato",color:"info",size:"sm",icon:"add_circle"},on:{click:function(t){return e.showEmpresa()}}})],1),a("div",{},[a("q-tabs",{staticClass:"bg-white text-grey-9 text-bold q-pl-md",staticStyle:{height:"47px"},attrs:{align:"left",dense:"",breakpoint:0,"no-caps":"","inline-label":""},model:{value:e.menuInterno,callback:function(t){e.menuInterno=t},expression:"menuInterno"}},[a("q-tab",{attrs:{name:"mails",icon:"list",label:"Todos"},on:{click:function(t){return e.listar()}}}),e.onDet?a("q-tab",{attrs:{name:"det",icon:"visibility",label:"Detalhes"}}):e._e()],1),a("q-tab-panels",{attrs:{animated:""},model:{value:e.menuInterno,callback:function(t){e.menuInterno=t},expression:"menuInterno"}},[a("q-tab-panel",{attrs:{name:"mails"}},[1==e.loadx?a("div",{staticClass:"q-pa-md text-center"},[a("q-spinner-tail",{attrs:{size:"xl",color:"info"}})],1):a("q-table",{staticClass:"no-border-radius",attrs:{title:"",data:e.data,columns:e.columns,"row-key":"designacao","selected-rows-label":e.getSelectedString,"rows-per-page-label":"Mostrar","no-results-label":"Nenhum dado encontrado!","no-data-label":"...",headerClasses:"text-red",filter:e.filter},scopedSlots:e._u([{key:"top-left",fn:function(){return[a("q-btn",{staticClass:"q-mt-sm q-mb-sm no-border-radius q-mr-xs",attrs:{color:"blue-9","icon-right":"archive",label:"Exportar Para Excel","no-caps":"",size:"sm"},on:{click:function(t){return e.exportExcel()}}}),a("q-btn",{staticClass:"q-mr-xs",attrs:{size:"sm",color:"info",icon:"line_style"}}),a("q-btn",{attrs:{size:"sm",color:"green-8",icon:"format_clear"},on:{click:function(t){e.filter=""}}})]},proxy:!0},{key:"top-right",fn:function(){return[a("q-input",{staticClass:"q-pa-md",staticStyle:{width:"500px"},attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Pesquisar"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}}),a("q-btn",{attrs:{color:"green-8",icon:"label_off"},on:{click:function(t){e.filter=""}}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0},{key:"body",fn:function(t){return[a("q-tr",{attrs:{props:t}},[a("q-td",{staticClass:"text-bold text-grey-8 text-body2"},[a("q-btn-dropdown",{staticClass:"no-border-radius",attrs:{size:"xs",icon:"vertical_split",color:"info",label:""}},[a("div",{staticClass:"row no-wrap q-pa-md"},[a("div",{staticClass:"column"},[a("div",{staticClass:"text-subtitle1 text-bold text-grey-7 q-mb-md"},[e._v("\n                            Operações\n                          ")]),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-mb-xs",attrs:{icon:"history",color:"green-8",label:"Detalhes",push:"",size:"sm"},on:{click:function(a){return e.goDetalhe(t.row)}}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-mb-xs",attrs:{icon:"edit",color:"blue-8",label:"Alterar",push:"",size:"sm"},on:{click:function(a){return e.showEmpresaEdit(t.row)}}})],1)])])],1),a("q-td",{staticClass:"text-bold"},[e._l(t.row.composicaoBrigada,(function(t){return a("label",{key:t.idDetalhesTicketsDestinos},[a("span",{staticClass:"text-blue-9"},[e._v(e._s(t.destinoTicketsDTO.descricao)+" Qtd.: "+e._s(t.quantidade))]),e._v(" | ")])})),t.row.composicaoBrigada.length?a("span",[e._v("Total: "+e._s(e.getCalBrigQTD(t.row.composicaoBrigada)))]):e._e()],2),e._l(t.cols,(function(i){return a("q-td",{key:i.name,staticClass:"text-bold",attrs:{props:t}},[e._v(e._s(i.value))])}))],2)]}}])})],1)],1),a("q-tab-panels",{attrs:{animated:""},model:{value:e.menuInterno,callback:function(t){e.menuInterno=t},expression:"menuInterno"}},[a("q-tab-panel",{attrs:{name:"det"}},[a("div",{staticClass:"row q-mt-md"},[a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"col-md-12 q-mb-sm"},[a("q-expansion-item",{staticClass:"bg-grey-9 text-bold text-white",attrs:{icon:"local_offer",label:"Informações"},model:{value:e.expandedx1,callback:function(t){e.expandedx1=t},expression:"expandedx1"}},[a("q-card",[a("q-card-section",{},[a("q-list",{staticClass:"text-grey-8"},[a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"business"}})],1),a("q-item-section",[a("q-item-label",[e._v(e._s(e.bindText(e.detalheEmpresa.nome)))]),a("q-item-label",{staticClass:"text-bold",attrs:{caption:"",lines:"1"}},[e._v("Empresa")])],1)],1),a("q-separator",{attrs:{spaced:""}}),a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"dialpad"}})],1),a("q-item-section",[a("q-item-label",[e._v(e._s(e.bindText(e.detalheEmpresa.nif)))]),a("q-item-label",{staticClass:"text-bold",attrs:{caption:"",lines:"1"}},[e._v("NIF")])],1)],1),a("q-separator",{attrs:{spaced:""}}),a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"email",color:"indigo-10"}})],1),a("q-item-section",[a("q-item-label",{staticClass:"indigo-10"},[e._v(e._s(e.bindText(e.detalheEmpresa.email)))]),a("q-item-label",{staticClass:"text-bold",attrs:{caption:"",lines:"1"}},[e._v("E-mail*")])],1)],1),a("q-separator",{attrs:{spaced:""}}),a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"explore"}})],1),a("q-item-section",[a("q-item-label",[e._v("\n                                "+e._s(e.detalheEmpresa.municipio?e.detalheEmpresa.municipio.descricao:"----")+"\n                                "+e._s(e.detalheEmpresa.municipio&&e.detalheEmpresa.municipio.provincia?e.detalheEmpresa.municipio.provincia.descricao:"----")+"\n                              ")]),a("q-item-label",{staticClass:"text-bold",attrs:{caption:"",lines:"1"}},[e._v("Província/Município")])],1)],1),a("q-separator",{attrs:{spaced:""}}),a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{color:e.detalheEmpresa.isActive?"green":"red",name:"data_usage"}})],1),a("q-item-section",[a("q-item-label",{class:e.detalheEmpresa.isActive?"text-green":"text-red"},[e._v("\n                                "+e._s(e.detalheEmpresa.isActive?"ON":"OFF")+"\n                              ")]),a("q-item-label",{staticClass:"text-bold",attrs:{caption:"",lines:"1"}},[e._v("Estado")])],1)],1),a("q-separator",{attrs:{spaced:""}}),a("q-separator",{attrs:{spaced:""}}),a("q-item-label",{staticClass:"text-bold text-grey-5"},[e._v("Dados do Gerente")]),a("q-separator",{attrs:{spaced:""}}),a("q-separator",{attrs:{spaced:""}}),a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"person",color:"indigo-10"}})],1),a("q-item-section",[a("q-item-label",{staticClass:"indigo-10"},[e._v(e._s(e.bindText(e.detalheEmpresa.gerente?e.detalheEmpresa.gerente.nomeCompleto:null)))]),a("q-item-label",{staticClass:"text-bold",attrs:{caption:"",lines:"1"}},[e._v("Gerente")])],1)],1),a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"contact_mail",color:"grey-8"}})],1),a("q-item-section",[a("q-item-label",{staticClass:"text-grey-8"},[e._v("\n                                E-mail:\n                                "+e._s(e.bindText(e.detalheEmpresa.gerente?e.detalheEmpresa.gerente.email:null)))]),a("q-item-label",{staticClass:"text-grey-8"},[e._v("\n                                Tel.1:\n                                "+e._s(e.bindText(e.detalheEmpresa.gerente?e.detalheEmpresa.gerente.contacto1:null)))]),a("q-item-label",{staticClass:"text-grey-8"},[e._v("\n                                Tel.2:\n                                "+e._s(e.bindText(e.detalheEmpresa.gerente?e.detalheEmpresa.gerente.contacto2:null)))]),a("q-item-label",{staticClass:"text-grey-8"},[e._v("\n                                Tel.2:\n                                "+e._s(e.bindText(e.detalheEmpresa.gerente?e.detalheEmpresa.gerente.contacto2:null)))]),a("q-item-label",{staticClass:"text-bold",attrs:{caption:"",lines:"1"}})],1)],1),a("q-separator",{attrs:{spaced:""}})],1)],1)],1)],1)],1),a("div",{staticClass:"col-md-12 q-mb-sm"},[a("q-expansion-item",{staticClass:"bg-grey-2 text-bold text-grey-9",attrs:{icon:"comment",label:"Composição Brigada"},model:{value:e.expandedx3,callback:function(t){e.expandedx3=t},expression:"expandedx3"}},[a("q-card",[a("q-card-section",{},[e.detalheEmpresa.composicaoBrigada!=[]?a("q-list",{staticClass:"text-grey-8"},[e._l(e.detalheEmpresa.composicaoBrigada,(function(t){return a("q-item",{key:t.idDetalhesTicketsDestinos,staticClass:"text-blue-9"},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"toll"}})],1),a("q-item-section",[a("q-item-label",[e._v(e._s(t.destinoTicketsDTO?t.destinoTicketsDTO.descricao:"-----")+" - Qtd.: "+e._s(e.bindText(t.quantidade))+"\n                                "),a("q-btn",{staticClass:"q-ml-sm",attrs:{color:"orange",size:"xs",icon:"edit"},on:{click:function(a){return e.editarBrigada(t)}}})],1),a("q-item-label",{staticClass:"text-bold",attrs:{caption:"",lines:"1"}})],1)],1)})),a("q-separator",{attrs:{spaced:""}})],2):e._e()],1)],1)],1)],1)]),a("div",{staticClass:"col-md-9"},[a("div",{staticClass:"col-md-12 q-mb-sm q-ml-sm"},[a("div",{staticClass:"row q-mb-md q-gutter-sm"},[a("q-btn",{attrs:{size:"md",color:"purple-10",label:"Composição Brigada",icon:"build"},on:{click:function(t){return e.showAddMACHINE()}}})],1),a("q-expansion-item",{staticClass:"bg-grey-0 text-bold text-grey-8 text-h6",attrs:{icon:"business",label:e.detalheEmpresa.nome},model:{value:e.expandedx,callback:function(t){e.expandedx=t},expression:"expandedx"}},[!e.detalheEmpresa.historicos||!e.detalheEmpresa.historicos.length?e._e():a("q-separator"),!e.detalheEmpresa.historicos||!e.detalheEmpresa.historicos.length?e._e():a("p",{staticClass:"text-bold text-grey-8 text-h6 q-ml-md q-mt-sm"},[e._v("\n                      Histórico ("+e._s(e.detalheEmpresa.historicos?e.detalheEmpresa.historicos.length:0)+")\n                    ")]),a("q-separator"),!e.detalheEmpresa.historicos||!e.detalheEmpresa.historicos.length?e._e():a("div",{staticClass:"text-white text-subtitle2"},e._l(e.detalheEmpresa.historicos,(function(t){return a("q-card",{key:t.id,staticClass:"text-grey-9 no-border-radius"},[e.ultimoelemento(e.detalheEmpresa.historicos,t.dataInsercao.split("-")[0],t.id)?a("q-card-section",{staticClass:"bg-grey-9"},[a("label",{staticClass:"text-bold text-h6 text-white text-center  q-mr-md"},[e._v("\n                            Total (Ano - "+e._s(t.dataInsercao.split("-")[0])+") : "+e._s(e.getTotalHecAno(e.detalheEmpresa.historicos,t.dataInsercao.split("-")[0]))+" Hectares\n                          ")]),e.findYearPaymant(e.detalheEmpresa&&e.detalheEmpresa.validacaoPagamentos,parseInt(t.dataInsercao.split("-")[0]))?a("q-btn",{attrs:{size:"md",color:"green-10",label:"Pagamento Validado",icon:"price_check",disable:""},on:{click:function(t){return e.showValidarPagamento()}}}):a("q-btn",{attrs:{disable:"",size:"md",color:"red-10",label:"Validar Pagamento",icon:"price_change"},on:{click:function(a){e.showValidarPagamento(parseInt(t.dataInsercao.split("-")[0]))}}})],1):e._e(),a("q-card-section",{class:t.dividaPaga?"bg-green-1":"bg-red-1"},[a("div",{staticClass:"text-h6"},[a("span",{staticClass:"text-bold"},[e._v(" == ")]),a("span",{class:t.dividaPaga?"text-green":"text-red"},[e._v("\n                              "+e._s(t.dividaPaga?"Dívida Paga":"Dívida Não Paga")+"\n                            ")]),a("span",{staticClass:"text-bold"},[e._v(" == ")])]),0==t.dividaPaga?a("div",{staticClass:"text-subtitle1"},[a("span",{staticClass:"text-bold"},[e._v("Motivo Não Pagamento:\n                            ")]),a("span",{staticClass:"text-grey"},[e._v("\n                              "+e._s(e.bindText(t.motivoNaoPagamento))+"\n                            ")])]):e._e(),a("div",{staticClass:"text-subtitle1"},[a("span",{staticClass:"text-bold"},[e._v("Estado: ")]),a("span",{staticClass:"text-grey"},[e._v("\n                              "+e._s(t.estado)+"\n                            ")])]),a("div",{staticClass:"text-subtitle1"},[a("span",{staticClass:"text-bold"},[e._v("Data Inserção:")]),a("span",{staticClass:"text-primary"},[e._v("\n                              "+e._s(e.getDataExt(t.dataInsercao))+"\n                            ")])]),a("div",{staticClass:"text-subtitle1"},[a("span",{staticClass:"text-bold"},[e._v("Data Conclusão da Dívida:")]),a("span",{staticClass:"text-primary"},[e._v("\n                              "+e._s(e.createdAtC(t.dataConclusaoDivida))+"\n                            ")])]),a("div",{staticClass:"text-subtitle1"},[a("span",{staticClass:"text-bold"},[e._v("Trimestre:")]),a("span",{staticClass:"text-primary"},[e._v("\n                              "+e._s(e.optionsTrimestre.filter((function(e){return e.id==t.trimeste}))&&e.optionsTrimestre.filter((function(e){return e.id==t.trimeste})).length?e.optionsTrimestre.filter((function(e){return e.id==t.trimeste}))[0].desc:"------")+"\n                            ")])]),a("div",{staticClass:"text-subtitle1"},[a("span",{staticClass:"text-bold"},[e._v("Valor Contrato:")]),a("span",{staticClass:"text-blue"},[e._v("\n                              "+e._s(t.valorContrato?e.currencyFormatDE(t.valorContrato):e.bindText(t.valorContrato))+"\n                              Kz\n                            ")])]),a("div",{staticClass:"text-subtitle1"},[a("span",{staticClass:"text-bold"},[e._v("Valor Pago:")]),a("span",{staticClass:"text-green"},[e._v("\n                              "+e._s(t.valorPago?e.currencyFormatDE(t.valorPago):e.bindText(t.valorPago))+"\n                              Kz\n                            ")])]),a("div",{staticClass:"text-subtitle1"},[a("span",{staticClass:"text-bold"},[e._v("Valor Dívida:")]),a("span",{staticClass:"text-red"},[e._v("\n                              "+e._s(t.valorDivida?e.currencyFormatDE(t.valorDivida):e.bindText(t.valorDivida))+"\n                              Kz\n                            ")])]),a("div",{staticClass:"text-subtitle1"},[a("span",{staticClass:"text-bold"},[e._v("Área Trabalhada:")]),a("span",{staticClass:"text-primary"},[e._v("\n                              "+e._s(e.bindText(t.areaTrabalhada))+" Hectares\n                            ")])]),a("div",{staticClass:"text-subtitle1"},[a("span",{staticClass:"text-bold"},[e._v("Localização:")]),a("span",{staticClass:"text-purple text-italic text-bold"},[e._v("\n                              "+e._s(e.getMuni(t.localizacao))+"\n                            ")])]),a("div",{staticClass:"text-subtitle1"},[a("span",{staticClass:"text-bold"},[e._v("Comentário(s):")]),a("span",{staticClass:"text-primary"},[e._v("\n                              "+e._s(e.bindText(t.comentarios))+"\n                            ")])])]),a("q-card-section")],1)})),1),a("q-separator",{staticClass:"bg-blue text-bold q-mt-sm"}),a("div",[e._e()],1),a("q-separator",{staticClass:"bg-orange text-bold"})],1)],1)])])])],1)],1),a("q-dialog",{attrs:{persistent:"","transition-show":"flip-down","transition-hide":"flip-up"},model:{value:e.btnAddEmpresa,callback:function(t){e.btnAddEmpresa=t},expression:"btnAddEmpresa"}},[a("q-card",{staticClass:"bg-white text-grey-8 no-border-radius",staticStyle:{width:"1200px","max-width":"80vw"}},[a("q-bar",{staticClass:"bg-info text-white"},[a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"},on:{click:function(t){e.btnAddEmpresa=!1}}},[a("q-tooltip",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{"content-class":"bg-white text-info"}},[e._v("Fechar")])],1)],1),a("q-card-section",[a("div",{staticClass:"text-h6"},[a("div",[a("q-icon",{attrs:{size:"xl",name:"add"}}),e._v("Adicionar Empresa")],1)])]),a("q-card-section",[a("q-form",{staticClass:"form-group",on:{submit:function(t){return e.addEmpresa(e.empresa)}}},[a("div",{staticClass:"row q-pb-md"},[a("div",{staticClass:"row col-md-12"},[a("div",{staticClass:"col-md-4 q-pr-xs"},[a("q-input",{attrs:{color:"blue-9",autofocus:"",label:"Nome da Empresa",filled:"","lazy-rules":"",required:"",rules:[function(e){return e&&e.length>0||"Empresa Inválida"}]},model:{value:e.empresa.nome,callback:function(t){e.$set(e.empresa,"nome",t)},expression:"empresa.nome"}})],1),a("div",{staticClass:"col-md-4 q-pr-xs"},[a("q-input",{attrs:{color:"blue-9",label:"NIF.",filled:"","lazy-rules":"",required:"",rules:[function(e){return e&&e.length>0||"NIF: Inválido"}]},model:{value:e.empresa.nif,callback:function(t){e.$set(e.empresa,"nif",t)},expression:"empresa.nif"}})],1),a("div",{staticClass:"col-md-4 q-pr-xs"},[a("q-input",{attrs:{color:"blue-9",label:"E-mail",filled:""},model:{value:e.empresa.email,callback:function(t){e.$set(e.empresa,"email",t)},expression:"empresa.email"}})],1)]),a("div",{staticClass:"row col-md-12 q-mb-sm q-mt-sm"},[a("div",{staticClass:"col-md-6 q-pr-xs"},[a("q-select",{attrs:{filled:"","input-class":"text-blue text-bold","transition-show":"flip-up","transition-hide":"flip-down","use-input":"","input-debounce":"0","option-value":"idProvincia","option-label":"descricao",label:"Província",options:e.options,behavior:"menu"},on:{input:function(t){return e.escolherProvincia(t)},filter:e.filterFn},scopedSlots:e._u([{key:"no-option",fn:function(){return[a("q-item",[a("q-item-section",{staticClass:"text-grey"},[a("p",{staticClass:"text-center text-grey-6 text-bold"},[a("q-icon",{attrs:{size:"md",name:"sentiment_dissatisfied"}}),e._v("\n                              Nenhum Encontrado\n                            ")],1)])],1)]},proxy:!0}]),model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1),a("div",{staticClass:"col-md-6 q-pr-xs"},[a("q-select",{attrs:{color:"green-9",filled:"","transition-show":"flip-up","transition-hide":"flip-down","input-debounce":"0",label:"Município",options:e.optionsP,behavior:"menu"},on:{filter:e.filterFnP},scopedSlots:e._u([{key:"no-option",fn:function(){return[a("q-item",[a("q-item-section",{staticClass:"text-grey q-gutter-md"},[a("div",{staticClass:"row"},[a("p",{staticClass:"text-center text-grey-6 text-bold"},[a("q-icon",{attrs:{size:"md",name:"sentiment_dissatisfied"}}),e._v("\n                                Nenhum Encontrado\n                              ")],1)])])],1)]},proxy:!0}]),model:{value:e.modelP,callback:function(t){e.modelP=t},expression:"modelP"}})],1)]),a("div",{staticClass:"row col-md-12"},[a("div",{staticClass:"col-md-6 q-pr-xs"},[a("q-input",{attrs:{color:"blue-9",label:"Gerente",filled:"","lazy-rules":"",required:"",rules:[function(e){return e&&e.length>0||"Gerente Inválido"}]},model:{value:e.empresa.nomeCompleto,callback:function(t){e.$set(e.empresa,"nomeCompleto",t)},expression:"empresa.nomeCompleto"}})],1),a("div",{staticClass:"col-md-6 q-pr-xs"},[a("q-input",{attrs:{color:"blue-9",label:"Gerente(E-mail)",filled:"","lazy-rules":"",required:"",rules:[function(e){return e&&e.length>0||"Gerente(E-mail) Inválido"}]},model:{value:e.empresa.gerenteEmail,callback:function(t){e.$set(e.empresa,"gerenteEmail",t)},expression:"empresa.gerenteEmail"}})],1)]),a("div",{staticClass:"row col-md-12"},[a("div",{staticClass:"col-md-4 q-pr-xs"},[a("q-input",{attrs:{color:"blue-9",label:"Gerente(Tel.1)",filled:"","lazy-rules":"",required:"",rules:[function(e){return e&&e.length>0||"Gerente(Tel.1) Inválido"}]},model:{value:e.empresa.contacto1,callback:function(t){e.$set(e.empresa,"contacto1",t)},expression:"empresa.contacto1"}})],1),a("div",{staticClass:"col-md-4 q-pr-xs"},[a("q-input",{attrs:{color:"blue-9",label:"Gerente(Tel.2)",filled:"","lazy-rules":"",required:"",rules:[function(e){return e&&e.length>0||"Gerente(Tel.2) Inválido"}]},model:{value:e.empresa.contacto2,callback:function(t){e.$set(e.empresa,"contacto2",t)},expression:"empresa.contacto2"}})],1),a("div",{staticClass:"col-md-4 q-pr-xs"},[a("q-input",{attrs:{color:"blue-9",label:"Gerente(Tel.3)",filled:"","lazy-rules":"",required:"",rules:[function(e){return e&&e.length>0||"Gerente(Tel.3) Inválido"}]},model:{value:e.empresa.contacto3,callback:function(t){e.$set(e.empresa,"contacto3",t)},expression:"empresa.contacto3"}})],1)])]),a("div",{staticClass:"row"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-ml-md",attrs:{color:"red","icon-right":"cancel",label:"Cancelar"},on:{click:function(t){e.btnAddEmpresa=!1}}}),null!=e.empresa.nome&&null!=e.empresa.nomeCompleto&&null!=e.empresa.contacto1?a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-ml-md",attrs:{color:"info",type:"submit","icon-right":"send",label:"Confirmar"}}):e._e()],1)])],1)],1)],1),a("q-dialog",{attrs:{persistent:"","transition-show":"flip-down","transition-hide":"flip-up"},model:{value:e.btnEditEmpresa,callback:function(t){e.btnEditEmpresa=t},expression:"btnEditEmpresa"}},[a("q-card",{staticClass:"bg-white text-grey-8 no-border-radius",staticStyle:{width:"1200px","max-width":"80vw"}},[a("q-bar",{staticClass:"bg-info text-white"},[a("q-space"),a("q-btn",{attrs:{dense:"",flat:"",icon:"close"},on:{click:function(t){e.btnEditEmpresa=!1}}},[a("q-tooltip",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{"content-class":"bg-white text-info"},on:{click:function(t){e.btnEditEmpresa=!1}}},[e._v("Fechar")])],1)],1),a("q-card-section",[a("div",{staticClass:"text-h6"},[a("div",[a("q-icon",{attrs:{size:"xl",name:"edit"}}),e._v("Alterar Empresa")],1)])]),a("q-card-section",[a("q-form",{staticClass:"form-group",on:{submit:function(t){return e.editarEmpresa(e.empresa)}}},[a("div",{staticClass:"row q-pb-md"},[a("div",{staticClass:"row col-md-12"},[a("div",{staticClass:"col-md-4 q-pr-xs"},[a("q-input",{attrs:{color:"blue-9",autofocus:"",label:"Nome da Empresa",filled:"","lazy-rules":"",required:"",rules:[function(e){return e&&e.length>0||"Empresa Inválida"}]},model:{value:e.empresa.nome,callback:function(t){e.$set(e.empresa,"nome",t)},expression:"empresa.nome"}})],1),a("div",{staticClass:"col-md-4 q-pr-xs"},[a("q-input",{attrs:{color:"blue-9",label:"NIF.",filled:"","lazy-rules":"",required:"",rules:[function(e){return e&&e.length>0||"NIF: Inválido"}]},model:{value:e.empresa.nif,callback:function(t){e.$set(e.empresa,"nif",t)},expression:"empresa.nif"}})],1),a("div",{staticClass:"col-md-4 q-pr-xs"},[a("q-input",{attrs:{color:"blue-9",label:"E-mail",filled:""},model:{value:e.empresa.email,callback:function(t){e.$set(e.empresa,"email",t)},expression:"empresa.email"}})],1)]),a("div",{staticClass:"row col-md-12 q-mb-sm q-mt-sm"},[a("div",{staticClass:"col-md-6 q-pr-xs"},[a("q-select",{attrs:{filled:"","input-class":"text-blue text-bold","transition-show":"flip-up","transition-hide":"flip-down","use-input":"","input-debounce":"0","option-value":"idProvincia","option-label":"descricao",label:"Provícia",options:e.options,behavior:"menu"},on:{input:function(t){return e.escolherProvincia(t)},filter:e.filterFn},scopedSlots:e._u([{key:"no-option",fn:function(){return[a("q-item",[a("q-item-section",{staticClass:"text-grey"},[a("p",{staticClass:"text-center text-grey-6 text-bold"},[a("q-icon",{attrs:{size:"md",name:"sentiment_dissatisfied"}}),e._v("\n                              Nenhum Encontrado\n                            ")],1)])],1)]},proxy:!0}]),model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1),a("div",{staticClass:"col-md-6 q-pr-xs"},[a("q-select",{attrs:{color:"green-9",filled:"","transition-show":"flip-up","transition-hide":"flip-down","input-debounce":"0",label:"Município","option-value":"value","option-label":"label",options:e.optionsP,behavior:"menu"},on:{filter:e.filterFnP},scopedSlots:e._u([{key:"no-option",fn:function(){return[a("q-item",[a("q-item-section",{staticClass:"text-grey q-gutter-md"},[a("div",{staticClass:"row"},[a("p",{staticClass:"text-center text-grey-6 text-bold"},[a("q-icon",{attrs:{size:"md",name:"sentiment_dissatisfied"}}),e._v("\n                                Nenhum Encontrado\n                              ")],1)])])],1)]},proxy:!0}]),model:{value:e.modelP,callback:function(t){e.modelP=t},expression:"modelP"}})],1)]),a("div",{staticClass:"row col-md-12"},[a("div",{staticClass:"col-md-6 q-pr-xs"},[a("q-input",{attrs:{color:"blue-9",label:"Gerente",filled:"","lazy-rules":"",required:"",rules:[function(e){return e&&e.length>0||"Gerente Inválido"}]},model:{value:e.empresa.nomeCompleto,callback:function(t){e.$set(e.empresa,"nomeCompleto",t)},expression:"empresa.nomeCompleto"}})],1),a("div",{staticClass:"col-md-6 q-pr-xs"},[a("q-input",{attrs:{color:"blue-9",label:"Gerente(E-mail)",filled:"","lazy-rules":"",required:"",rules:[function(e){return e&&e.length>0||"Gerente(E-mail) Inválido"}]},model:{value:e.empresa.gerenteEmail,callback:function(t){e.$set(e.empresa,"gerenteEmail",t)},expression:"empresa.gerenteEmail"}})],1)]),a("div",{staticClass:"row col-md-12"},[a("div",{staticClass:"col-md-4 q-pr-xs"},[a("q-input",{attrs:{color:"blue-9",label:"Gerente(Tel.1)",filled:"","lazy-rules":"",required:"",rules:[function(e){return e&&e.length>0||"Gerente(Tel.1) Inválido"}]},model:{value:e.empresa.contacto1,callback:function(t){e.$set(e.empresa,"contacto1",t)},expression:"empresa.contacto1"}})],1),a("div",{staticClass:"col-md-4 q-pr-xs"},[a("q-input",{attrs:{color:"blue-9",label:"Gerente(Tel.2)",filled:"","lazy-rules":"",required:"",rules:[function(e){return e&&e.length>0||"Gerente(Tel.2) Inválido"}]},model:{value:e.empresa.contacto2,callback:function(t){e.$set(e.empresa,"contacto2",t)},expression:"empresa.contacto2"}})],1),a("div",{staticClass:"col-md-4 q-pr-xs"},[a("q-input",{attrs:{color:"blue-9",label:"Gerente(Tel.3)",filled:"","lazy-rules":"",required:"",rules:[function(e){return e&&e.length>0||"Gerente(Tel.3) Inválido"}]},model:{value:e.empresa.contacto3,callback:function(t){e.$set(e.empresa,"contacto3",t)},expression:"empresa.contacto3"}})],1)])]),a("div",{staticClass:"row"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-ml-md",attrs:{color:"red","icon-right":"cancel",label:"Cancelar"},on:{click:function(t){e.btnEditEmpresa=!1}}}),null!=e.empresa.nome&&null!=e.empresa.nomeCompleto&&null!=e.empresa.contacto1?a("q-btn",{staticClass:"q-ml-md",attrs:{color:"light-blue",type:"submit","icon-right":"send",label:"Confirmar"}}):e._e()],1)])],1)],1)],1),a("q-dialog",{attrs:{persistent:"","transition-show":"flip-down","transition-hide":"flip-up"},model:{value:e.showADDMAC,callback:function(t){e.showADDMAC=t},expression:"showADDMAC"}},[a("q-card",{staticClass:"bg-white text-grey-8 no-border-radius",staticStyle:{width:"1400px","max-width":"180vw"}},[a("q-bar",{staticClass:"bg-primary text-white"},[a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[a("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[e._v("Fechar")])],1)],1),a("q-card-section",[1==e.editb?a("div",{staticClass:"text-h6"},[e._v("Editar Máquinas(Brigada)")]):a("div",{staticClass:"text-h6"},[e._v("Adicionar Máquinas(Brigada)")])]),a("q-form",{staticClass:"form-group q-pa-md",on:{submit:function(t){return e.FUNCADDMACH()}}},[a("q-separator",{staticClass:"q-mb-md"}),a("q-select",{attrs:{filled:"","input-class":"text-blue text-bold","transition-show":"flip-up","transition-hide":"flip-down","use-input":"","input-debounce":"0","option-value":"idDestinoTickets","option-label":"descricao",label:"Máquina",options:e.listaMaquina,behavior:"menu"},on:{input:function(t){return e.escolherProvincia(t)},filter:e.filterFnMAQ},scopedSlots:e._u([{key:"no-option",fn:function(){return[a("q-item",[a("q-item-section",{staticClass:"text-grey"},[a("p",{staticClass:"text-center text-grey-6 text-bold"},[a("q-icon",{attrs:{size:"md",name:"sentiment_dissatisfied"}}),e._v("\n                      Nenhum Encontrado\n                    ")],1)])],1)]},proxy:!0}]),model:{value:e.modelMAQ,callback:function(t){e.modelMAQ=t},expression:"modelMAQ"}}),a("div",{staticClass:"q-mt-md"},[a("q-btn",{staticClass:"q-mr-sm",attrs:{color:"red",size:"sm",icon:"remove"},on:{click:function(){e.MACH.qtd>1?e.MACH.qtd--:e.MACH.qtd}}}),a("q-btn",{attrs:{color:"green",size:"sm",icon:"add"},on:{click:function(){e.MACH.qtd++}}}),a("div",{staticClass:"row col q-mt-sm"},[a("q-btn",{attrs:{color:"primary",icon:"opacity",label:"Quantidade: "+e.MACH.qtd}}),a("q-popup-edit",{scopedSlots:e._u([{key:"default",fn:function(t){var i=t.emitValue,s=t.set;return[a("q-input",{attrs:{autofocus:"",dense:"",type:"number",hint:"Quatidade de Produtos",value:e.MACH.qtd},on:{input:i},scopedSlots:e._u([{key:"after",fn:function(){return[a("q-btn",{attrs:{flat:"",dense:"",color:"green",icon:"check_circle"},on:{click:function(e){return e.stopPropagation(),s(e)}}})]},proxy:!0}],null,!0)})]}}]),model:{value:e.MACH.qtd,callback:function(t){e.$set(e.MACH,"qtd",e._n(t))},expression:"MACH.qtd"}})],1)],1),a("q-card-actions",{staticClass:"bg-white text-teal",attrs:{align:"right"}},[a("div",{staticClass:"row q-pt-sm q-gutter-md"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"red","icon-right":"cancel",label:"Cancelar"}}),0==e.editb?a("q-btn",{directives:[{name:"show",rawName:"v-show",value:null!=e.modelMAQ,expression:"modelMAQ != null"},{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"blue",type:"submit","icon-right":"save",label:"Guardar"}}):a("q-btn",{directives:[{name:"show",rawName:"v-show",value:null!=e.modelMAQ,expression:"modelMAQ != null"},{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"green",type:"submit","icon-right":"save",label:"Actualizar"}})],1)])],1)],1)],1)],1)])])},n=[],r=a("9523"),o=a.n(r),l=a("c973"),c=a.n(l),d=a("a34a"),m=a.n(d),u=(a("d25f"),a("a481"),a("28a5"),a("06db"),a("6b54"),a("7514"),a("b383"),a("cf57")),p=(a("e669"),a("6bed")),f=a("981c"),v=a("d272"),b={data:function(){var e=this;return{optionsDividaPaga:[{id:!0,desc:"Paga"},{id:!1,desc:"Não Paga"}],optionsTrimestre:[{id:1,desc:"Iº Trimestre"},{id:2,desc:"IIº Trimestre"},{id:3,desc:"IIIº Trimestre"},{id:4,desc:"IVº Trimestre"}],userLogado:JSON.parse(localStorage.getItem("userlogado")),detalheEmpresa:{},expandedx1:!0,expandedx:!0,expandedy0:!0,expandedx2:!0,expandedx3:!0,expandedx4:!0,expandedx5:!0,loadx:!1,empresa:{id:null,isActivo:!0},btnAddEmpresa:!1,btnEditEmpresa:!1,filter:"",columns:[{align:"left",label:"Operações",sortable:!0},{align:"left",label:"Composição *Brigada",sortable:!0},{name:"descricao",required:!0,label:"Empresa",align:"left",field:function(t){return e.getNull(t.nome)},format:function(e){return"".concat(e)},sortable:!0},{name:"nif",required:!0,label:"NIF.",align:"left",field:function(t){return e.getNull(t.nif)},format:function(e){return"".concat(e)},sortable:!0},{name:"municipio",required:!0,label:"Província/Município",align:"left",field:function(t){return e.getNull(t.municipio?t.municipio.provincia.descricao:"")+" / "+e.getNull(t.municipio?t.municipio.descricao:"")},format:function(e){return"".concat(e)},sortable:!0},{name:"gerente",required:!0,label:"Gerente",align:"left",field:function(t){return e.getNull(t.gerente?t.gerente.nomeCompleto:"")},format:function(e){return"".concat(e)},sortable:!0},{name:"gerenteemail",required:!0,label:"E-mail *Gerente",align:"left",field:function(t){return e.getNull(t.gerente?t.gerente.email:"")},format:function(e){return"".concat(e)},sortable:!0},{name:"gerenteTel1",required:!0,label:"Contactos *Gerente",align:"left",field:function(t){return e.getNull(t.gerente?t.gerente.contacto1+" | "+t.gerente.contacto2+" | "+t.gerente.contacto3:"")},format:function(e){return"".concat(e)},sortable:!0}],data:[],menuInterno:"mails",onDet:!1,model:{idProvincia:null,descricao:null},modelP:{value:null,label:null},options:[],optionsP:[],stringOptions:[],stringOptionsP:[],spinner2:"undefined"!==typeof p["a"]?p["a"]:Quasar.components.QSpinnerComment,listaMunicipio:[],MACH:{IdDestino:null,qtd:1},showADDMAC:!1,listaMaquina:[],stringOptionsMAQ:[],modelMAQ:{idDestinoTickets:null,descricao:null},columnsMaquinas:[{align:"left",label:"Operações",sortable:!0},{name:"designacao",required:!0,label:"Produto (Designação)",align:"left",field:function(e){return e.designacao},format:function(e){return"".concat(e)},sortable:!0},{name:"valor",required:!0,label:"Preço",align:"left",format:function(e){return"".concat(e)},sortable:!0}],columnsCarrinho:[{align:"left",label:"Operações",sortable:!0},{name:"designacao",required:!0,label:"Produto (Designação)",align:"left",field:function(e){return e.designacao},format:function(e){return"".concat(e)},sortable:!0}],editb:!1,testDD:!0,selected:[]}},created:function(){this.fasSignal=v["b"],this.fasWifi=v["c"],this.fasBatteryFull=v["a"]},mounted:function(){this.listarMaquina(),this.listarProvincia(),this.listarMunicipio(),this.booting()},methods:(i={getMuni:function(e){var t=[];return t=this.listaMunicipio.filter((function(t){return t.idAreaResponsavelTickets===e})),t.length?t[0].descricao:"----------"},currencyFormatDE:function(e){return e.toFixed(2).replace(".",",").replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1.")},getNull:function(e){return null==e||""==e?"------":e},invertCreatedAtC:function(e){return e?e.toString().split(" ")[0].split("-").reverse().join("-"):null},createdAtC:function(e){return e?e.toString().split("T")[0].split("-").reverse().join("-"):null},dateHH:function(){var e=new Date;e=new Date(e.getTime()-3e6);var t=e.getFullYear();return t},findYearPaymant:function(e,t){var a=null;return e.length>0?(a=e.find((function(e){return e.ano==t})),a):a},getTotalHecAno:function(e,t){var a=0;return e.filter((function(e){e.dataInsercao.split("-")[0]==t&&(a+=parseFloat(e.areaTrabalhada))})),a},ultimoelemento:function(e,t,a){var i=[];return e.filter((function(e){e.dataInsercao.split("-")[0]==t&&i.push(e)})),i.length>0&&i[0].id==a},exportExcel:function(){var e=this,t=[];this.data.length>0&&this.data.forEach((function(a){var i="";a.composicaoBrigada.forEach((function(e){i+="".concat(e.destinoTicketsDTO.descricao," Qtd.:").concat(e.quantidade," | ")})),i+="TOTAL: ".concat(e.getCalBrigQTD(a.composicaoBrigada));var s={composicaoBrigada:i,empresa:e.getNull(a.nome),nif:e.getNull(a.nif),provincia:e.getNull(a.municipio?a.municipio.provincia.descricao:""),municipio:e.getNull(a.municipio?a.municipio.descricao:""),emailGerente:e.getNull(a.gerente?a.gerente.email:""),gerente:e.getNull(a.gerente?a.gerente.nomeCompleto:""),conatctosGerente:e.getNull(a.gerente?a.gerente.contacto1+" | "+a.gerente.contacto2+" | "+a.gerente.contacto3:"")};t.push(s)})),console.table(t),this.exportExcelAPI(t)},baixarFile:function(e){var t=e.msg.split("/")[3],a=document.createElement("a");a.href="/statics"+e.msg,a.setAttribute("download",t),a.click()},exportExcelAPI:function(e){var t=this;return c()(m.a.mark((function a(){var i;return m.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.filter="","undefined"!==typeof p["a"]?p["a"]:Quasar.components.QSpinnerComment,a.prev=2,t.loadx=!0,a.next=6,t.$store.dispatch("maquinas/exportExcelEmpresas",e);case 6:i=a.sent,console.log("Resultado: ",i),null!=i.data?(t.baixarFile(i.data),t.timer=setTimeout((function(){t.timer=setTimeout((function(){t.$q.loading.hide(),t.timer=void 0,t.lmsg("green","Exprtado com sucesso!","green"),t.loadx=!1}),1e3)}),0)):t.lmsg("red","ups! Ocorreu um erro internamente","red"),a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](2),t.lmsgx("red-9",a.t0,"red-9");case 14:case"end":return a.stop()}}),a,null,[[2,11]])})))()},getCalBrigQTD:function(e){var t=0;return e.forEach((function(e){t+=e.quantidade})),t},getDataExt:function(e){return e?e.split("T")[0].split("-")[2]+"/"+e.split("T")[0].split("-")[1]+"/"+e.split("T")[0].split("-")[0]+" "+e.split("T")[1].split(":")[0]+":"+e.split("T")[1].split(":")[1]:"----"},editarBrigada:function(e){this.editb=!0,this.showADDMAC=!0,this.modelMAQ.idDestinoTickets=e.destinoTicketsDTO?e.destinoTicketsDTO.idDestinoTickets:null,this.modelMAQ.descricao=e.destinoTicketsDTO?e.destinoTicketsDTO.descricao:null,this.MACH={IdDetalhesTicketsDestinos:e.idDetalhesTicketsDestinos,IdDestinoTickets:e.idDestinoTickets,qtd:e.quantidade,IdEmpresa:this.detalheEmpresa.id}},listarMaquina:function(){var e=this;return c()(m.a.mark((function t(){var a;return m.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.loadx=!0,t.next=4,e.$store.dispatch("maquinas/list");case 4:a=t.sent,null!=a.data?e.timer=setTimeout((function(){e.timer=setTimeout((function(){e.$q.loading.hide(),e.timer=void 0,e.listaMaquina=a.data.filter((function(e){return 1==e.isActivo})),e.stringOptionsMAQ=a.data.filter((function(e){return 1==e.isActivo}))}),1e3)}),0):e.lmsg("red","ups! Ocorreu um erro internamente","red"),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.lmsgx("red-9",t.t0,"red-9");case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},FUNCADDMACH:function(){1==this.editb?this.funcaoEdit():0==this.editb&&this.funcaoAdd1()},funcaoAdd1:function(){var e=this;return c()(m.a.mark((function t(){var a,i,s;return m.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={IdDestinoTickets:e.modelMAQ.idDestinoTickets,IdEmpresa:e.detalheEmpresa.id,Quantidade:e.MACH.qtd,IdUser:e.userLogado.idUtilizador},e.lprocessar(),i=[],i.push(a),t.prev=4,t.next=7,e.$store.dispatch("maquinas/addMaqEMp",i);case 7:s=t.sent,null!==s.data&&0===s.data.statusCode?e.timer=setTimeout((function(){e.$q.loading.show({spinner:e.spinner2,spinnerColor:"green-4",message:"Operação realidada com com sucesso!*"}),e.timer=setTimeout((function(){e.$q.loading.hide(),e.timer=void 0,e.listar(),e.goDetalhe(e.detalheEmpresa),e.filter=e.empresa.nome}),1e3)}),0):null!==s.data&&1===s.data.statusCode?e.lmsg("orange","Não foi possível realizar está operação!*","orange"):e.lmsgx("primary",error,"primary"),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](4),e.lmsgx("primary",t.t0,"primary");case 14:case"end":return t.stop()}}),t,null,[[4,11]])})))()},funcaoEdit:function(){var e=this;return c()(m.a.mark((function t(){var a,i,s;return m.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={IdDestinoTickets:e.modelMAQ.idDestinoTickets,IdEmpresa:e.detalheEmpresa.id,Quantidade:e.MACH.qtd,IdDetalhesTicketsDestinos:e.MACH.IdDetalhesTicketsDestinos,IdUser:e.userLogado.idUtilizador},e.lprocessar(),i=[],i.push(a),t.prev=4,t.next=7,e.$store.dispatch("maquinas/upMaqEMp",i);case 7:s=t.sent,null!==s.data&&0===s.data.statusCode?e.timer=setTimeout((function(){e.$q.loading.show({spinner:e.spinner2,spinnerColor:"green-4",message:"Operação realidada com com sucesso!*"}),e.timer=setTimeout((function(){e.$q.loading.hide(),e.timer=void 0,e.listar(),e.goDetalhe(e.detalheEmpresa),e.filter=e.empresa.nome}),1e3)}),0):null!==s.data&&1===s.data.statusCode?e.lmsg("orange","Não foi possível realizar está operação!*","orange"):e.lmsgx("primary",error,"primary"),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](4),e.lmsgx("primary",t.t0,"primary");case 14:case"end":return t.stop()}}),t,null,[[4,11]])})))()},showAddMACHINE:function(){this.editb=!1,this.showADDMAC=!0,this.MACH={IdDestino:null,qtd:1},this.modelMAQ={idDestinoTickets:null,descricao:null}},booting:function(){this.getAcessoMENU("admin")||this.getAcessoMENU("gestores")||this.getAcessoMENU("comissão provincial")?this.$route.query&&this.$route.query.data?this.goDetalhe({id:this.$route.query.data.id}):this.listar():this.$router.push("/dashboard")},getAcessoMENU:function(e){if(this.userLogado)return!(!this.userLogado||!this.userLogado.roles.filter((function(t){return t.nome.toString().toLowerCase()===e})).length)},lprocessar:function(){var e="undefined"!==typeof u["a"]?u["a"]:Quasar.components.QSpinnerGears;"undefined"!==typeof p["a"]?p["a"]:Quasar.components.QSpinnerComment;this.$q.loading.show({spinner:e,message:"Por favor, aguarde alguns segundos..."})},lmsgx:function(e,t,a){var i=this,s="",n=("undefined"!==typeof f["a"]?f["a"]:Quasar.components.QSpinnerGrid,"undefined"!==typeof p["a"]?p["a"]:Quasar.components.QSpinnerComment);t.response&&(s=401==t.response.status?"owh!! A sessão expirou, faça novamente o login.":"Ups! Ocorreu um erro, por favor tente novamente!"),this.timer=setTimeout((function(){i.$q.loading.show({spinner:n,spinnerColor:a,messageColor:"white",backgroundColor:e,message:s}),i.timer=setTimeout((function(){i.$q.loading.hide(),i.timer=void 0,t.response&&t.response.status&&401==t.response.status&&i.$router.push("/")}),3e3)}),0)},escolherProvincia:function(e){var t=this;this.stringOptionsP=[],this.listaMunicipio.forEach((function(a){a.idProvincia==e.idProvincia&&t.stringOptionsP.push({label:a.descricao,value:a.idAreaResponsavelTickets})})),this.modelP={value:null,label:null}},escolherProvincia2:function(e){var t=this;this.stringOptionsP=[],this.listaMunicipio.forEach((function(a){a.idProvincia==e.idProvincia&&t.stringOptionsP.push({label:a.descricao,value:a.idAreaResponsavelTickets})}))},listarMunicipio:function(){var e=this;return c()(m.a.mark((function t(){var a;return m.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("maquinas/listMunicipio");case 3:a=t.sent,null!=a.data&&(e.timer=setTimeout((function(){e.timer=setTimeout((function(){e.$q.loading.hide(),e.timer=void 0,e.listaMunicipio=a.data}),0)}),0)),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.lmsgx("primary",t.t0,"primary");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},listarProvincia:function(){var e=this;return c()(m.a.mark((function t(){var a;return m.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("maquinas/listProvincia");case 3:a=t.sent,null!=a.data&&(e.timer=setTimeout((function(){e.timer=setTimeout((function(){e.$q.loading.hide(),e.timer=void 0,e.dataProvincia=a.data,e.stringOptions=a.data}),0)}),0)),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.lmsgx("primary",t.t0,"primary");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},filterFnMAQ:function(e,t){var a=this;t(""!==e?function(){var t=e.toLowerCase();a.listaMaquina=a.stringOptionsMAQ.filter((function(e){return e.descricao.toLowerCase().indexOf(t)>-1}))}:function(){a.listaMaquina=a.stringOptionsMAQ})},filterFn:function(e,t){var a=this;t(""!==e?function(){var t=e.toLowerCase();a.options=a.stringOptions.filter((function(e){return e.descricao.toLowerCase().indexOf(t)>-1}))}:function(){a.options=a.stringOptions})},filterFnP:function(e,t){var a=this;t(""!==e?function(){var t=e.toLowerCase();a.optionsP=a.stringOptionsP.filter((function(e){return e.label.toLowerCase().indexOf(t)>-1}))}:function(){a.optionsP=a.stringOptionsP})},bindText:function(e){return null==e||""==e?"------":e},goDetalhe:function(e){var t=this;return c()(m.a.mark((function a(){var i;return m.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.expandedy0=!1,t.objectoD={},t.lprocessar(),t.objectoD=e,a.prev=3,a.next=6,t.$store.dispatch("maquinas/empresaGetById",e.id);case 6:i=a.sent,i.data,t.timer=setTimeout((function(){t.timer=setTimeout((function(){t.$q.loading.hide(),t.timer=void 0,t.onDet=!0,t.menuInterno="mails",t.detalheEmpresa=i.data,t.onDet=!0,t.menuInterno="det"}),100)}),0),a.next=13;break;case 10:a.prev=10,a.t0=a["catch"](3),t.lmsgx("primary",a.t0,"primary");case 13:case"end":return a.stop()}}),a,null,[[3,10]])})))()}},o()(i,"getNull",(function(e){return null==e||""==e?"------":e})),o()(i,"addEmpresa",(function(e){var t=this;return c()(m.a.mark((function e(){var a,i;return m.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.lprocessar(),a={Nome:t.empresa.nome,Nif:t.empresa.nif,Email:t.empresa.email,IdMunicipio:t.modelP?t.modelP.value:null,Gerente:{NomeCompleto:t.empresa.nomeCompleto,Email:t.empresa.gerenteEmail,Contacto1:t.empresa.contacto1,Contacto2:t.empresa.contacto2,Contacto3:t.empresa.contacto3},IdUser:t.userLogado.idUtilizador},e.prev=2,e.next=5,t.$store.dispatch("maquinas/addEmpresa",a);case 5:i=e.sent,null!==i.data&&0===i.data.statusCode?t.timer=setTimeout((function(){t.$q.loading.show({spinner:t.spinner2,spinnerColor:"green-4",message:"Operação realidada com com sucesso!*"}),t.timer=setTimeout((function(){t.$q.loading.hide(),t.timer=void 0,t.listar(),t.goDetalhe({id:i.data.msg}),t.filter=t.empresa.nome}),1e3)}),0):null!==i.data&&1===i.data.statusCode?t.lmsg("orange","Não foi possível realizar está operação!*","orange"):t.lmsgx("primary",error,"primary"),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),t.lmsgx("primary",e.t0,"primary");case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))()})),o()(i,"editarEmpresa",(function(e){var t=this;return c()(m.a.mark((function e(){var a,i;return m.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={Id:t.empresa.id,Nome:t.empresa.nome,Nif:t.empresa.nif,Email:t.empresa.email,IdMunicipio:t.modelP?t.modelP.value:null,Gerente:{NomeCompleto:t.empresa.nomeCompleto,Email:t.empresa.gerenteEmail,Contacto1:t.empresa.contacto1,Contacto2:t.empresa.contacto2,Contacto3:t.empresa.contacto3},IdUser:t.userLogado.idUtilizador},t.lprocessar(),e.prev=2,e.next=5,t.$store.dispatch("maquinas/editEmpresa",a);case 5:i=e.sent,null!==i.data&&0===i.data.statusCode?t.timer=setTimeout((function(){t.$q.loading.show({spinner:t.spinner2,spinnerColor:"green-4",message:"Operação realidada com com sucesso!*"}),t.timer=setTimeout((function(){t.$q.loading.hide(),t.timer=void 0,t.listar(),t.filter=t.empresa.nome,t.btnEditEmpresa=!1}),1e3)}),0):null!==i.data&&1===i.data.statusCode?t.lmsg("orange","Não foi possível realizar está operação!*","orange"):t.lmsgx("primary",error,"primary"),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),t.lmsgx("primary",e.t0,"primary");case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))()})),o()(i,"showEmpresa",(function(){this.btnAddEmpresa=!this.btnAddEmpresa,this.empresa={},this.btnEditEmpresa=!1})),o()(i,"showEmpresaEdit",(function(e){this.btnEditEmpresa=!this.btnAddEmpresa,this.modelP.label=e.municipio?e.municipio.descricao:null,this.modelP.value=e.municipio?e.municipio.idAreaResponsavelTickets:null,1==this.btnEditEmpresa&&(this.empresa={id:e.id,nome:e.nome,nif:e.nif,email:e.email,nomeCompleto:e.gerente?e.gerente.nomeCompleto:null,contacto1:e.gerente?e.gerente.contacto1:null,contacto2:e.gerente?e.gerente.contacto2:null,contacto3:e.gerente?e.gerente.contacto3:null,gerenteEmail:e.gerente?e.gerente.email:null},this.model.descricao=e.municipio?e.municipio.provincia.descricao:null,this.model.idProvincia=e.municipio?e.municipio.provincia.idProvincia:null,this.escolherProvincia2(e.municipio?e.municipio.provincia:null))})),o()(i,"lmsg",(function(e,t,a){var i=this,s=("undefined"!==typeof u["a"]?u["a"]:Quasar.components.QSpinnerGears,"undefined"!==typeof p["a"]?p["a"]:Quasar.components.QSpinnerComment);this.timer=setTimeout((function(){i.$q.loading.show({spinner:s,spinnerColor:a,messageColor:"white",backgroundColor:e,message:t}),i.timer=setTimeout((function(){i.$q.loading.hide(),i.timer=void 0}),1e3)}),100)})),o()(i,"getSelectedString",(function(){return 0===this.selected.length?"":"".concat(this.selected.length," linha").concat(this.selected.length>1?"s":""," selecionada").concat(this.selected.length>1?"s":""," de ").concat(this.data.length," Registro").concat(this.data.length>1?"s":"")})),o()(i,"listar",(function(){var e=this;return c()(m.a.mark((function t(){var a;return m.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.filter="","undefined"!==typeof p["a"]?p["a"]:Quasar.components.QSpinnerComment,t.prev=2,e.loadx=!0,t.next=6,e.$store.dispatch("maquinas/listEmpresas");case 6:a=t.sent,null!=a.data?e.timer=setTimeout((function(){e.timer=setTimeout((function(){e.$q.loading.hide(),e.timer=void 0;var t=[];t=a.data;var i=t.filter((function(t){return t.municipio.provincia.idProvincia==e.userLogado.idProvincia}));e.getAcessoMENU("comissão provincial")?(e.data=i,e.lista=i):(e.data=t,e.lista=t),e.loadx=!1}),1e3)}),0):e.lmsg("red","ups! Ocorreu um erro internamente","red"),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](2),e.lmsgx("red-9",t.t0,"red-9");case 13:case"end":return t.stop()}}),t,null,[[2,10]])})))()})),i)},g=b,h=a("2877"),x=a("9989"),q=a("d847"),C=a("0016"),w=a("2c91"),E=a("9c40"),y=a("429b"),_=a("7460"),k=a("adad"),T=a("823b"),A=a("007d"),D=a("eaac"),P=a("27f9"),M=a("bd08"),I=a("db86"),Q=a("8f8e"),N=a("f20b"),$=a("9564"),z=a("58a8"),O=a("3b73"),S=a("f09f"),G=a("a370"),F=a("1c1c"),H=a("66e5"),B=a("4074"),L=a("0170"),U=a("eb85"),V=a("24e8"),R=a("05c0"),j=a("0378"),J=a("ddd8"),K=a("42a1"),Y=a("4b7e"),W=a("7f67"),X=a("714f"),Z=a("eebe"),ee=a.n(Z),te=Object(h["a"])(g,s,n,!1,null,"739a546f",null);t["default"]=te.exports;ee()(te,"components",{QPage:x["a"],QBar:q["a"],QIcon:C["a"],QSpace:w["a"],QBtn:E["a"],QTabs:y["a"],QTab:_["a"],QTabPanels:k["a"],QTabPanel:T["a"],QSpinnerTail:A["a"],QTable:D["a"],QInput:P["a"],QTr:M["a"],QTd:I["a"],QCheckbox:Q["a"],QBtnDropdown:N["a"],QToggle:$["a"],QBadge:z["a"],QExpansionItem:O["a"],QCard:S["a"],QCardSection:G["a"],QList:F["a"],QItem:H["a"],QItemSection:B["a"],QItemLabel:L["a"],QSeparator:U["a"],QDialog:V["a"],QTooltip:R["a"],QForm:j["a"],QSelect:J["a"],QPopupEdit:K["a"],QCardActions:Y["a"]}),ee()(te,"directives",{ClosePopup:W["a"],Ripple:X["a"]})}}]);