(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{aeab:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=this,s=t.$createElement,a=t._self._c||s;return a("q-page",{staticClass:"docs-input row justify-center"},[a("div",{staticClass:"col-xl-4 col-lg-4 col-md-3 col-sm-6 col-xs-12 q-pa-md"},[a("div",{staticClass:"text-center q-pb-xs"},[a("div",{staticClass:"text-grey-7"},[a("q-toolbar"),a("q-toolbar",{attrs:{inset:""}},[a("q-breadcrumbs",{staticStyle:{"font-size":"25px"},attrs:{"active-color":"white"}})],1),a("q-toolbar",{attrs:{inset:""}},[a("q-breadcrumbs",{staticStyle:{"font-size":"25px"},attrs:{"active-color":"white"}})],1),a("q-avatar",{staticStyle:{cursor:"pointer"},attrs:{clickable:""},on:{click:function(e){return t.goInfo()}}},[a("q-icon",{staticClass:"text-blue-9",attrs:{size:"md",name:"copyright"}})],1),a("label",{staticClass:"text-blue-9",staticStyle:{cursor:"pointer"},attrs:{clickable:""},on:{click:function(e){return t.goInfo()}}},[a("b",[t._v("Desenvolvido por: Infoscript")])])],1)]),a("q-form",{staticClass:"q-gutter-md",on:{submit:t.onSubmit}},[a("q-input",{attrs:{filled:"",color:"grey",label:"Ex: carlos43 *",hint:"Utilizador",error:t.isTest,required:"","lazy-rules":"",rules:[function(e){return e&&e.length>3||"Utilizador Inválido"}]},model:{value:t.user.username,callback:function(e){t.$set(t.user,"username",e)},expression:"user.username"}}),a("q-input",{attrs:{color:"grey",filled:"",type:t.isPwd?"password":"text",label:"Ex: 142135 *",hint:"Palavra-passe","lazy-rules":"",rules:[function(e){return e&&e.length>3||"Palavra-Passe Inválida"}]},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{error:t.isTest,name:t.isPwd?"visibility_off":"visibility"},on:{click:function(e){t.isPwd=!t.isPwd}}})]},proxy:!0}]),model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}}),a("div",{staticClass:"row"},[a("q-btn",{staticClass:"full-width no-border-radius",staticStyle:{height:"45px"},attrs:{padding:"",label:"Entrar",type:"submit",color:"info"}})],1)],1),a("q-dialog",{attrs:{persistent:"",position:"top"},model:{value:t.recover_password,callback:function(e){t.recover_password=e},expression:"recover_password"}},[a("q-card",{},[a("q-linear-progress",{attrs:{value:1,color:"primary"}}),a("q-card-section",{staticClass:"row items-center no-wrap q-gutter-md"},[a("q-form",{staticClass:"row q-gutter-md",on:{submit:function(e){return t.changePassword()}}},[a("div",{staticClass:"col-md-12"},[a("p",{staticClass:"text-subtitle1 text-bold text-grey-7"},[t._v('\n                  "Por Motivos de Segurança pedimos encarecidamente que\n                  '),a("b",{staticClass:"text-primary"},[t._v("altere a sua Palavra-Passe")]),t._v(', Por\n                  Favor!"\n                ')])]),a("div",{staticClass:"col-md-12"},[a("q-input",{attrs:{autofocus:"",label:"Nova Palavra-Passe",filled:"",type:t.isPwdx?"password":"text","lazy-rules":"",rules:[function(e){return e&&e.length>5&&"123456"!==e||"Não pode ter Menos de 6 caract. e Não pode ser 123456"}]},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{error:t.isTestx,name:t.isPwdx?"visibility_off":"visibility"},on:{click:function(e){t.isPwdx=!t.isPwdx}}})]},proxy:!0}]),model:{value:t.pass.NovaPassword,callback:function(e){t.$set(t.pass,"NovaPassword",e)},expression:"pass.NovaPassword"}})],1),a("div",{staticClass:"col-md-12"},[a("q-input",{attrs:{label:"Confirmar Palavra-Passe",filled:"",type:t.isPwdx?"password":"text","lazy-rules":"",rules:[function(t){return t&&t===e.pass.NovaPassword||"Confirmação diferente da Nova Palavra-Passe"}]},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{error:t.isTestx,name:t.isPwdx?"visibility_off":"visibility"},on:{click:function(e){t.isPwdx=!t.isPwdx}}})]},proxy:!0}]),model:{value:t.confPass,callback:function(e){t.confPass=e},expression:"confPass"}})],1),a("div",{staticClass:"col-md-12"},[a("q-btn",{staticClass:"q-ml-md",attrs:{color:"blue-7",type:"submit","icon-right":"send",label:"Actualizar"}})],1)]),a("q-space")],1)],1)],1)],1)])},r=[],o=s("967e"),i=s.n(o),n=(s("96cf"),s("fa84")),l=s.n(n),c=(s("bc3a"),s("b383")),u=s.n(c),d=s("cf57"),p=(s("e669"),s("6bed")),m={name:"PageIndex",data:function(){return{recover_password:!1,userLogado:JSON.parse(localStorage.getItem("userlogado")),isTestx:!1,isPwdx:!0,pass:{Username:null,PasswordAntiga:"123456",NovaPassword:null},confPass:null,user:{username:null,password:null,grant_type:"password"},userLogged:{},isTest:!1,isPwd:!0,changeId:null}},methods:{goInfo:function(){window.open("https://www.infoscriptlt.com/","_blank")},lprocessar:function(){var e="undefined"!==typeof d["a"]?d["a"]:Quasar.components.QSpinnerGears;"undefined"!==typeof p["a"]?p["a"]:Quasar.components.QSpinnerComment;this.$q.loading.show({spinner:e,message:"Por favor, aguarde alguns segundos..."})},lmsg:function(e,t,s){var a=this,r=("undefined"!==typeof d["a"]?d["a"]:Quasar.components.QSpinnerGears,"undefined"!==typeof p["a"]?p["a"]:Quasar.components.QSpinnerComment);this.timer=setTimeout((function(){a.$q.loading.show({spinner:r,spinnerColor:s,messageColor:"white",backgroundColor:e,message:t}),a.timer=setTimeout((function(){a.$q.loading.hide(),a.timer=void 0}),3e3)}),0)},changePassword:function(){var e=l()(i.a.mark((function e(){var t,s,a=this;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="undefined"!==typeof p["a"]?p["a"]:Quasar.components.QSpinnerComment,this.lprocessar(),e.prev=2,e.next=5,this.$store.dispatch("users/reiniciarPalavraPasse",{Id:this.changeId,NovaPassword:this.pass.NovaPassword});case 5:s=e.sent,0==s.data.statusCode?this.timer=setTimeout((function(){a.$q.loading.show({spinner:t,spinnerColor:"green-4",message:"Palavra-Passe Actualizada com sucesso*"}),a.timer=setTimeout((function(){a.$q.loading.hide(),a.timer=void 0,a.changeId=null,a.$router.push("/dashboard")}),1e3)}),0):this.lmsg("red","ups!Não foi possível alterar, verifique a palavra-passe antiga! *","red"),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),this.lmsg("red","ups!Não foi possível alterar, verifique a palavra-passe antiga! *","red");case 12:case"end":return e.stop()}}),e,this,[[2,9]])})));function t(){return e.apply(this,arguments)}return t}(),logout:function(){localStorage.removeItem("Authorization"),localStorage.removeItem("userId"),localStorage.removeItem("username"),localStorage.removeItem("email"),localStorage.removeItem("state"),localStorage.removeItem("personId"),localStorage.removeItem("fullName"),localStorage.removeItem("userlogado")},onSubmit:function(){var e=l()(i.a.mark((function e(){var t,s,a,r=this;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.changeId=null,t="undefined"!==typeof p["a"]?p["a"]:Quasar.components.QSpinnerComment,null!=this.user.username&&null!=this.user.password&&""!=this.user.username&&""!=this.user.password){e.next=5;break}e.next=29;break;case 5:return this.lprocessar(),console.log("User: ",u.a.stringify(this.user)),e.prev=7,e.next=10,this.$store.dispatch("login/login",u.a.stringify(this.user));case 10:return s=e.sent,localStorage.setItem("Authorization",s.data.access_token),e.next=14,this.$store.dispatch("login/userLogged");case 14:a=e.sent,localStorage.setItem("userlogado",JSON.stringify(a.data)),localStorage.setItem("username",a.data.login),localStorage.setItem("userId",a.data.idUtilizador),localStorage.setItem("email",a.data.email),localStorage.setItem("state",a.data.isActivo),localStorage.setItem("fullName",a.data.nome),this.changeId=a.data.idUtilizador,null===a.data||"true"!=a.data.isActivo&&1!=a.data.isActivo?null===a.data||"false"!=a.data.isActivo&&0!=a.data.isActivo&&null!=a.data.isActivo||(this.lmsg("red","Este Utilizador Está Desativado! * ".concat(this.user.username),"red"),this.logout()):this.timer=setTimeout((function(){r.$q.loading.show({spinner:t,spinnerColor:"green-4",message:"Acesso Permido, Bem-Vindo * ".concat(JSON.parse(localStorage.getItem("userlogado")).nome)}),r.timer=setTimeout((function(){r.$q.loading.hide(),r.timer=void 0,"123456"==r.user.password?r.recover_password=!0:r.$router.push("/dashboard")}),1e3)}),0),e.next=29;break;case 25:e.prev=25,e.t0=e["catch"](7),this.lmsg("red","Ups!... Utlizador Ou Palavra-Passe Incorrecta, por favor verifique!","red"),this.logout();case 29:case"end":return e.stop()}}),e,this,[[7,25]])})));function t(){return e.apply(this,arguments)}return t}(),beforeDestroy:function(){void 0!==this.timer&&(clearTimeout(this.timer),this.$q.loading.hide())}}},f=m,g=s("2877"),v=s("eebe"),h=s.n(v),w=s("9989"),b=s("65c6"),P=s("ead5"),x=s("cb32"),y=s("0016"),q=s("0378"),S=s("27f9"),I=s("9c40"),C=s("24e8"),k=s("f09f"),Q=s("6b1d"),_=s("a370"),N=s("2c91"),z=Object(g["a"])(f,a,r,!1,null,null,null);t["default"]=z.exports;h()(z,"components",{QPage:w["a"],QToolbar:b["a"],QBreadcrumbs:P["a"],QAvatar:x["a"],QIcon:y["a"],QForm:q["a"],QInput:S["a"],QBtn:I["a"],QDialog:C["a"],QCard:k["a"],QLinearProgress:Q["a"],QCardSection:_["a"],QSpace:N["a"]})}}]);